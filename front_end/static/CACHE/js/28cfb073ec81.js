!function(a){a.fn.bootstrapSwitch=function(c){var b={init:function(){return this.each(function(){var p=a(this),m,f,l,o,q=p.closest("form"),h="",g=p.attr("class"),i,d,j="ON",e="OFF",n=false;a.each(["switch-mini","switch-small","switch-large"],function(r,s){if(g.indexOf(s)>=0){h=s}});p.addClass("has-switch");if(p.data("on")!==undefined){i="switch-"+p.data("on")}if(p.data("on-label")!==undefined){j=p.data("on-label")}if(p.data("off-label")!==undefined){e=p.data("off-label")}if(p.data("icon")!==undefined){n=p.data("icon")}f=a("<span>").addClass("switch-left").addClass(h).addClass(i).html(j);i="";if(p.data("off")!==undefined){i="switch-"+p.data("off")}l=a("<span>").addClass("switch-right").addClass(h).addClass(i).html(e);o=a("<label>").html("&nbsp;").addClass(h).attr("for",p.find("input").attr("id"));if(n){o.html('<i class="icon icon-'+n+'"></i>')}m=p.find("input").wrap(a("<div>")).parent().data("animated",false);if(p.data("animated")!==false){m.addClass("switch-animate").data("animated",true)}m.append(f).append(o).append(l);p.find(">div").addClass(p.find("input").is(":checked")?"switch-on":"switch-off");if(p.find("input").is(":disabled")){a(this).addClass("deactivate")}var k=function(r){r.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")};p.on("keydown",function(r){if(r.keyCode===32){r.stopImmediatePropagation();r.preventDefault();k(a(r.target).find("span:first"))}});f.on("click",function(r){k(a(this))});l.on("click",function(r){k(a(this))});p.find("input").on("change",function(w,u){var v=a(this),s=v.parent(),r=v.is(":checked"),t=s.is(".switch-off");w.preventDefault();s.css("left","");if(t===r){if(r){s.removeClass("switch-off").addClass("switch-on")}else{s.removeClass("switch-on").addClass("switch-off")}if(s.data("animated")!==false){s.addClass("switch-animate")}if(typeof u==="boolean"&&u){return}s.parent().trigger("switch-change",{el:v,value:r})}});p.find("label").on("mousedown touchstart",function(s){var r=a(this);d=false;s.preventDefault();s.stopImmediatePropagation();r.closest("div").removeClass("switch-animate");if(r.closest(".has-switch").is(".deactivate")){r.unbind("click")}else{r.on("mousemove touchmove",function(y){var t=a(this).closest(".switch"),v=(y.pageX||y.originalEvent.targetTouches[0].pageX)-t.offset().left,w=(v/t.width())*100,x=25,u=75;d=true;if(w<x){w=x}else{if(w>u){w=u}}t.find(">div").css("left",(w-u)+"%")});r.on("click touchend",function(w){var v=a(this),t=a(w.target),u=t.siblings("input");w.stopImmediatePropagation();w.preventDefault();v.unbind("mouseleave");if(d){u.prop("checked",!(parseInt(v.parent().css("left"))<-25))}else{u.prop("checked",!u.is(":checked"))}d=false;u.trigger("change")});r.on("mouseleave",function(v){var u=a(this),t=u.siblings("input");v.preventDefault();v.stopImmediatePropagation();u.unbind("mouseleave");u.trigger("mouseup");t.prop("checked",!(parseInt(u.parent().css("left"))<-25)).trigger("change")});r.on("mouseup",function(t){t.stopImmediatePropagation();t.preventDefault();a(this).unbind("mousemove")})}});if(q.data("bootstrapSwitch")!=="injected"){q.bind("reset",function(){setTimeout(function(){q.find(".switch").each(function(){var r=a(this).find("input");r.prop("checked",r.is(":checked")).trigger("change")})},1)});q.data("bootstrapSwitch","injected")}})},toggleActivation:function(){var d=a(this);d.toggleClass("deactivate");d.find("input:checkbox").attr("disabled",d.is(".deactivate"))},isActive:function(){return!a(this).hasClass("deactivate")},setActive:function(e){var d=a(this);if(e){d.removeClass("deactivate");d.find("input:checkbox").attr("disabled",false)}else{d.addClass("deactivate");d.find("input:checkbox").attr("disabled",true)}},toggleState:function(d){var e=a(this).find("input[type=checkbox]");e.prop("checked",!e.is(":checked")).trigger("change",d)},toggleRadioState:function(d){a(this).find("input[type=radio]").not(":checked").trigger("change",d)},setState:function(e,d){a(this).find("input").prop("checked",e).trigger("change",d)},status:function(){return a(this).find("input").is(":checked")},destroy:function(){var f=a(this),e=f.find("div"),g=f.closest("form"),d;e.find(":not(input)").remove();d=e.children();d.unwrap().unwrap();d.unbind("change");if(g){g.unbind("reset");g.removeData("bootstrapSwitch")}return d}};if(b[c]){return b[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return b.init.apply(this,arguments)}else{a.error("Method "+c+" does not exist!")}}}}(jQuery);(function(){jQuery(".switch")["bootstrapSwitch"]()})();Backbone.Validation=(function(_){'use strict';var defaultOptions={forceUpdate:false,selector:'name',labelFormatter:'sentenceCase',valid:Function.prototype,invalid:Function.prototype};var formatFunctions={formatLabel:function(attrName,model){return defaultLabelFormatters[defaultOptions.labelFormatter](attrName,model);},format:function(){var args=Array.prototype.slice.call(arguments),text=args.shift();return text.replace(/\{(\d+)\}/g,function(match,number){return typeof args[number]!=='undefined'?args[number]:match;});}};var flatten=function(obj,into,prefix){into=into||{};prefix=prefix||'';_.each(obj,function(val,key){if(obj.hasOwnProperty(key)){if(val&&typeof val==='object'&&!(val instanceof Array||val instanceof Date||val instanceof RegExp||val instanceof Backbone.Model||val instanceof Backbone.Collection)){flatten(val,into,prefix+key+'.');}
else{into[prefix+key]=val;}}});return into;};var Validation=(function(){var getValidatedAttrs=function(model){return _.reduce(_.keys(_.result(model,'validation')||{}),function(memo,key){memo[key]=void 0;return memo;},{});};var getValidators=function(model,attr){var attrValidationSet=model.validation?_.result(model,'validation')[attr]||{}:{};if(_.isFunction(attrValidationSet)||_.isString(attrValidationSet)){attrValidationSet={fn:attrValidationSet};}
if(!_.isArray(attrValidationSet)){attrValidationSet=[attrValidationSet];}
return _.reduce(attrValidationSet,function(memo,attrValidation){_.each(_.without(_.keys(attrValidation),'msg'),function(validator){memo.push({fn:defaultValidators[validator],val:attrValidation[validator],msg:attrValidation.msg});});return memo;},[]);};var validateAttr=function(model,attr,value,computed){return _.reduce(getValidators(model,attr),function(memo,validator){var ctx=_.extend({},formatFunctions,defaultValidators),result=validator.fn.call(ctx,value,attr,validator.val,model,computed);if(result===false||memo===false){return false;}
if(result&&!memo){return _.result(validator,'msg')||result;}
return memo;},'');};var validateModel=function(model,attrs){var error,invalidAttrs={},isValid=true,computed=_.clone(attrs),flattened=flatten(attrs);_.each(flattened,function(val,attr){error=validateAttr(model,attr,val,computed);if(error){invalidAttrs[attr]=error;isValid=false;}});return{invalidAttrs:invalidAttrs,isValid:isValid};};var mixin=function(view,options){return{preValidate:function(attr,value){var self=this,result={},error;if(_.isObject(attr)){_.each(attr,function(value,key){error=self.preValidate(key,value);if(error){result[key]=error;}});return _.isEmpty(result)?undefined:result;}
else{return validateAttr(this,attr,value,_.extend({},this.attributes));}},isValid:function(option){var flattened=flatten(this.attributes);if(_.isString(option)){return!validateAttr(this,option,flattened[option],_.extend({},this.attributes));}
if(_.isArray(option)){return _.reduce(option,function(memo,attr){return memo&&!validateAttr(this,attr,flattened[attr],_.extend({},this.attributes));},true,this);}
if(option===true){this.validate();}
return this.validation?this._isValid:true;},validate:function(attrs,setOptions){var model=this,validateAll=!attrs,opt=_.extend({},options,setOptions),validatedAttrs=getValidatedAttrs(model),allAttrs=_.extend({},validatedAttrs,model.attributes,attrs),changedAttrs=flatten(attrs||allAttrs),result=validateModel(model,allAttrs);model._isValid=result.isValid;_.each(validatedAttrs,function(val,attr){var invalid=result.invalidAttrs.hasOwnProperty(attr);if(!invalid){opt.valid(view,attr,opt.selector);}});_.each(validatedAttrs,function(val,attr){var invalid=result.invalidAttrs.hasOwnProperty(attr),changed=changedAttrs.hasOwnProperty(attr);if(invalid&&(changed||validateAll)){opt.invalid(view,attr,result.invalidAttrs[attr],opt.selector);}});_.defer(function(){model.trigger('validated',model._isValid,model,result.invalidAttrs);model.trigger('validated:'+(model._isValid?'valid':'invalid'),model,result.invalidAttrs);});if(!opt.forceUpdate&&_.intersection(_.keys(result.invalidAttrs),_.keys(changedAttrs)).length>0){return result.invalidAttrs;}}};};var bindModel=function(view,model,options){_.extend(model,mixin(view,options));};var unbindModel=function(model){delete model.validate;delete model.preValidate;delete model.isValid;};var collectionAdd=function(model){bindModel(this.view,model,this.options);};var collectionRemove=function(model){unbindModel(model);};return{version:'0.9.0',configure:function(options){_.extend(defaultOptions,options);},bind:function(view,options){options=_.extend({},defaultOptions,defaultCallbacks,options);var model=options.model||view.model,collection=options.collection||view.collection;if(typeof model==='undefined'&&typeof collection==='undefined'){throw'Before you execute the binding your view must have a model or a collection.\n'+'See http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.';}
if(model){bindModel(view,model,options);}
else if(collection){collection.each(function(model){bindModel(view,model,options);});collection.bind('add',collectionAdd,{view:view,options:options});collection.bind('remove',collectionRemove);}},unbind:function(view,options){options=_.extend({},options);var model=options.model||view.model,collection=options.collection||view.collection;if(model){unbindModel(model);}
if(collection){collection.each(function(model){unbindModel(model);});collection.unbind('add',collectionAdd);collection.unbind('remove',collectionRemove);}},mixin:mixin(null,defaultOptions)};}());var defaultCallbacks=Validation.callbacks={valid:function(view,attr,selector){view.$('['+selector+'~="'+attr+'"]').removeClass('invalid').removeAttr('data-error');},invalid:function(view,attr,error,selector){view.$('['+selector+'~="'+attr+'"]').addClass('invalid').attr('data-error',error);}};var defaultPatterns=Validation.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i};var defaultMessages=Validation.messages={required:'{0} is required',acceptance:'{0} must be accepted',min:'{0} must be greater than or equal to {1}',max:'{0} must be less than or equal to {1}',range:'{0} must be between {1} and {2}',length:'{0} must be {1} characters',minLength:'{0} must be at least {1} characters',maxLength:'{0} must be at most {1} characters',rangeLength:'{0} must be between {1} and {2} characters',oneOf:'{0} must be one of: {1}',equalTo:'{0} must be the same as {1}',digits:'{0} must only contain digits',number:'{0} must be a number',email:'{0} must be a valid email',url:'{0} must be a valid url',inlinePattern:'{0} is invalid'};var defaultLabelFormatters=Validation.labelFormatters={none:function(attrName){return attrName;},sentenceCase:function(attrName){return attrName.replace(/(?:^\w|[A-Z]|\b\w)/g,function(match,index){return index===0?match.toUpperCase():' '+match.toLowerCase();}).replace(/_/g,' ');},label:function(attrName,model){return(model.labels&&model.labels[attrName])||defaultLabelFormatters.sentenceCase(attrName,model);}};var defaultValidators=Validation.validators=(function(){var trim=String.prototype.trim?function(text){return text===null?'':String.prototype.trim.call(text);}:function(text){var trimLeft=/^\s+/,trimRight=/\s+$/;return text===null?'':text.toString().replace(trimLeft,'').replace(trimRight,'');};var isNumber=function(value){return _.isNumber(value)||(_.isString(value)&&value.match(defaultPatterns.number));};var hasValue=function(value){return!(_.isNull(value)||_.isUndefined(value)||(_.isString(value)&&trim(value)==='')||(_.isArray(value)&&_.isEmpty(value)));};return{fn:function(value,attr,fn,model,computed){if(_.isString(fn)){fn=model[fn];}
return fn.call(model,value,attr,computed);},required:function(value,attr,required,model,computed){var isRequired=_.isFunction(required)?required.call(model,value,attr,computed):required;if(!isRequired&&!hasValue(value)){return false;}
if(isRequired&&!hasValue(value)){return this.format(defaultMessages.required,this.formatLabel(attr,model));}},acceptance:function(value,attr,accept,model){if(value!=='true'&&(!_.isBoolean(value)||value===false)){return this.format(defaultMessages.acceptance,this.formatLabel(attr,model));}},min:function(value,attr,minValue,model){if(!isNumber(value)||value<minValue){return this.format(defaultMessages.min,this.formatLabel(attr,model),minValue);}},max:function(value,attr,maxValue,model){if(!isNumber(value)||value>maxValue){return this.format(defaultMessages.max,this.formatLabel(attr,model),maxValue);}},range:function(value,attr,range,model){if(!isNumber(value)||value<range[0]||value>range[1]){return this.format(defaultMessages.range,this.formatLabel(attr,model),range[0],range[1]);}},length:function(value,attr,length,model){if(!_.isString(value)||value.length!==length){return this.format(defaultMessages.length,this.formatLabel(attr,model),length);}},minLength:function(value,attr,minLength,model){if(!_.isString(value)||value.length<minLength){return this.format(defaultMessages.minLength,this.formatLabel(attr,model),minLength);}},maxLength:function(value,attr,maxLength,model){if(!_.isString(value)||value.length>maxLength){return this.format(defaultMessages.maxLength,this.formatLabel(attr,model),maxLength);}},rangeLength:function(value,attr,range,model){if(!_.isString(value)||value.length<range[0]||value.length>range[1]){return this.format(defaultMessages.rangeLength,this.formatLabel(attr,model),range[0],range[1]);}},oneOf:function(value,attr,values,model){if(!_.include(values,value)){return this.format(defaultMessages.oneOf,this.formatLabel(attr,model),values.join(', '));}},equalTo:function(value,attr,equalTo,model,computed){if(value!==computed[equalTo]){return this.format(defaultMessages.equalTo,this.formatLabel(attr,model),this.formatLabel(equalTo,model));}},pattern:function(value,attr,pattern,model){if(!hasValue(value)||!value.toString().match(defaultPatterns[pattern]||pattern)){return this.format(defaultMessages[pattern]||defaultMessages.inlinePattern,this.formatLabel(attr,model),pattern);}}};}());_.each(defaultValidators,function(validator,key){defaultValidators[key]=_.bind(defaultValidators[key],_.extend({},formatFunctions,defaultValidators));});return Validation;}(_));(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery','jquery.ui.widget'],factory);}else{factory(window.jQuery);}}(function($){'use strict';$.support.xhrFileUpload=!!(window.XMLHttpRequestUpload&&window.FileReader);$.support.xhrFormDataFileUpload=!!window.FormData;$.widget('blueimp.fileupload',{options:{namespace:undefined,dropZone:$(document),pasteZone:$(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,formData:function(form){return form.serializeArray();},add:function(e,data){data.submit();},processData:false,contentType:false,cache:false},_refreshOptionsList:['namespace','fileInput','dropZone','pasteZone','multipart','forceIframeTransport'],_BitrateTimer:function(){this.timestamp=+(new Date());this.loaded=0;this.bitrate=0;this.getBitrate=function(now,loaded,interval){var timeDiff=now-this.timestamp;if(!this.bitrate||!interval||timeDiff>interval){this.bitrate=(loaded-this.loaded)*(1000/timeDiff)*8;this.loaded=loaded;this.timestamp=now;}
return this.bitrate;};},_isXHRUpload:function(options){return!options.forceIframeTransport&&((!options.multipart&&$.support.xhrFileUpload)||$.support.xhrFormDataFileUpload);},_getFormData:function(options){var formData;if(typeof options.formData==='function'){return options.formData(options.form);}
if($.isArray(options.formData)){return options.formData;}
if(options.formData){formData=[];$.each(options.formData,function(name,value){formData.push({name:name,value:value});});return formData;}
return[];},_getTotal:function(files){var total=0;$.each(files,function(index,file){total+=file.size||1;});return total;},_onProgress:function(e,data){if(e.lengthComputable){var now=+(new Date()),total,loaded;if(data._time&&data.progressInterval&&(now-data._time<data.progressInterval)&&e.loaded!==e.total){return;}
data._time=now;total=data.total||this._getTotal(data.files);loaded=parseInt(e.loaded/e.total*(data.chunkSize||total),10)+(data.uploadedBytes||0);this._loaded+=loaded-(data.loaded||data.uploadedBytes||0);data.lengthComputable=true;data.loaded=loaded;data.total=total;data.bitrate=data._bitrateTimer.getBitrate(now,loaded,data.bitrateInterval);this._trigger('progress',e,data);this._trigger('progressall',e,{lengthComputable:true,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(now,this._loaded,data.bitrateInterval)});}},_initProgressListener:function(options){var that=this,xhr=options.xhr?options.xhr():$.ajaxSettings.xhr();if(xhr.upload){$(xhr.upload).bind('progress',function(e){var oe=e.originalEvent;e.lengthComputable=oe.lengthComputable;e.loaded=oe.loaded;e.total=oe.total;that._onProgress(e,options);});options.xhr=function(){return xhr;};}},_initXHRData:function(options){var formData,file=options.files[0],multipart=options.multipart||!$.support.xhrFileUpload,paramName=options.paramName[0];if(!multipart||options.blob){options.headers=$.extend(options.headers,{'X-File-Name':file.name,'X-File-Type':file.type,'X-File-Size':file.size});if(!options.blob){options.contentType=file.type;options.data=file;}else if(!multipart){options.contentType='application/octet-stream';options.data=options.blob;}}
if(multipart&&$.support.xhrFormDataFileUpload){if(options.postMessage){formData=this._getFormData(options);if(options.blob){formData.push({name:paramName,value:options.blob});}else{$.each(options.files,function(index,file){formData.push({name:options.paramName[index]||paramName,value:file});});}}else{if(options.formData instanceof FormData){formData=options.formData;}else{formData=new FormData();$.each(this._getFormData(options),function(index,field){formData.append(field.name,field.value);});}
if(options.blob){formData.append(paramName,options.blob,file.name);}else{$.each(options.files,function(index,file){if(file instanceof Blob){formData.append(options.paramName[index]||paramName,file,file.name);}});}}
options.data=formData;}
options.blob=null;},_initIframeSettings:function(options){options.dataType='iframe '+(options.dataType||'');options.formData=this._getFormData(options);if(options.redirect&&$('<a></a>').prop('href',options.url).prop('host')!==location.host){options.formData.push({name:options.redirectParamName||'redirect',value:options.redirect});}},_initDataSettings:function(options){if(this._isXHRUpload(options)){if(!this._chunkedUpload(options,true)){if(!options.data){this._initXHRData(options);}
this._initProgressListener(options);}
if(options.postMessage){options.dataType='postmessage '+(options.dataType||'');}}else{this._initIframeSettings(options,'iframe');}},_getParamName:function(options){var fileInput=$(options.fileInput),paramName=options.paramName;if(!paramName){paramName=[];fileInput.each(function(){var input=$(this),name=input.prop('name')||'files[]',i=(input.prop('files')||[1]).length;while(i){paramName.push(name);i-=1;}});if(!paramName.length){paramName=[fileInput.prop('name')||'files[]'];}}else if(!$.isArray(paramName)){paramName=[paramName];}
return paramName;},_initFormSettings:function(options){if(!options.form||!options.form.length){options.form=$(options.fileInput.prop('form'));if(!options.form.length){options.form=$(this.options.fileInput.prop('form'));}}
options.paramName=this._getParamName(options);if(!options.url){options.url=options.form.prop('action')||location.href;}
options.type=(options.type||options.form.prop('method')||'').toUpperCase();if(options.type!=='POST'&&options.type!=='PUT'){options.type='POST';}
if(!options.formAcceptCharset){options.formAcceptCharset=options.form.attr('accept-charset');}},_getAJAXSettings:function(data){var options=$.extend({},this.options,data);this._initFormSettings(options);this._initDataSettings(options);return options;},_enhancePromise:function(promise){promise.success=promise.done;promise.error=promise.fail;promise.complete=promise.always;return promise;},_getXHRPromise:function(resolveOrReject,context,args){var dfd=$.Deferred(),promise=dfd.promise();context=context||this.options.context||promise;if(resolveOrReject===true){dfd.resolveWith(context,args);}else if(resolveOrReject===false){dfd.rejectWith(context,args);}
promise.abort=dfd.promise;return this._enhancePromise(promise);},_chunkedUpload:function(options,testOnly){var that=this,file=options.files[0],fs=file.size,ub=options.uploadedBytes=options.uploadedBytes||0,mcs=options.maxChunkSize||fs,slice=file.slice||file.webkitSlice||file.mozSlice,upload,n,jqXHR,pipe;if(!(this._isXHRUpload(options)&&slice&&(ub||mcs<fs))||options.data){return false;}
if(testOnly){return true;}
if(ub>=fs){file.error='Uploaded bytes exceed file size';return this._getXHRPromise(false,options.context,[null,'error',file.error]);}
n=Math.ceil((fs-ub)/mcs);upload=function(i){if(!i){return that._getXHRPromise(true,options.context);}
return upload(i-=1).pipe(function(){var o=$.extend({},options);o.blob=slice.call(file,ub+i*mcs,ub+(i+1)*mcs);o.chunkIndex=i;o.chunksNumber=n;o.chunkSize=o.blob.size;that._initXHRData(o);that._initProgressListener(o);jqXHR=($.ajax(o)||that._getXHRPromise(false,o.context)).done(function(){if(!o.loaded){that._onProgress($.Event('progress',{lengthComputable:true,loaded:o.chunkSize,total:o.chunkSize}),o);}
options.uploadedBytes=o.uploadedBytes+=o.chunkSize;});return jqXHR;});};pipe=upload(n);pipe.abort=function(){return jqXHR.abort();};return this._enhancePromise(pipe);},_beforeSend:function(e,data){if(this._active===0){this._trigger('start');this._bitrateTimer=new this._BitrateTimer();}
this._active+=1;this._loaded+=data.uploadedBytes||0;this._total+=this._getTotal(data.files);},_onDone:function(result,textStatus,jqXHR,options){if(!this._isXHRUpload(options)){this._onProgress($.Event('progress',{lengthComputable:true,loaded:1,total:1}),options);}
options.result=result;options.textStatus=textStatus;options.jqXHR=jqXHR;this._trigger('done',null,options);},_onFail:function(jqXHR,textStatus,errorThrown,options){options.jqXHR=jqXHR;options.textStatus=textStatus;options.errorThrown=errorThrown;this._trigger('fail',null,options);if(options.recalculateProgress){this._loaded-=options.loaded||options.uploadedBytes||0;this._total-=options.total||this._getTotal(options.files);}},_onAlways:function(jqXHRorResult,textStatus,jqXHRorError,options){this._active-=1;options.textStatus=textStatus;if(jqXHRorError&&jqXHRorError.always){options.jqXHR=jqXHRorError;options.result=jqXHRorResult;}else{options.jqXHR=jqXHRorResult;options.errorThrown=jqXHRorError;}
this._trigger('always',null,options);if(this._active===0){this._trigger('stop');this._loaded=this._total=0;this._bitrateTimer=null;}},_onSend:function(e,data){var that=this,jqXHR,slot,pipe,options=that._getAJAXSettings(data),send=function(resolve,args){that._sending+=1;options._bitrateTimer=new that._BitrateTimer();jqXHR=jqXHR||((resolve!==false&&that._trigger('send',e,options)!==false&&(that._chunkedUpload(options)||$.ajax(options)))||that._getXHRPromise(false,options.context,args)).done(function(result,textStatus,jqXHR){that._onDone(result,textStatus,jqXHR,options);}).fail(function(jqXHR,textStatus,errorThrown){that._onFail(jqXHR,textStatus,errorThrown,options);}).always(function(jqXHRorResult,textStatus,jqXHRorError){that._sending-=1;that._onAlways(jqXHRorResult,textStatus,jqXHRorError,options);if(options.limitConcurrentUploads&&options.limitConcurrentUploads>that._sending){var nextSlot=that._slots.shift(),isPending;while(nextSlot){isPending=nextSlot.state?nextSlot.state()==='pending':!nextSlot.isRejected();if(isPending){nextSlot.resolve();break;}
nextSlot=that._slots.shift();}}});return jqXHR;};this._beforeSend(e,options);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){slot=$.Deferred();this._slots.push(slot);pipe=slot.pipe(send);}else{pipe=(this._sequence=this._sequence.pipe(send,send));}
pipe.abort=function(){var args=[undefined,'abort','abort'];if(!jqXHR){if(slot){slot.rejectWith(pipe,args);}
return send(false,args);}
return jqXHR.abort();};return this._enhancePromise(pipe);}
return send();},_onAdd:function(e,data){var that=this,result=true,options=$.extend({},this.options,data),limit=options.limitMultiFileUploads,paramName=this._getParamName(options),paramNameSet,paramNameSlice,fileSet,i;if(!(options.singleFileUploads||limit)||!this._isXHRUpload(options)){fileSet=[data.files];paramNameSet=[paramName];}else if(!options.singleFileUploads&&limit){fileSet=[];paramNameSet=[];for(i=0;i<data.files.length;i+=limit){fileSet.push(data.files.slice(i,i+limit));paramNameSlice=paramName.slice(i,i+limit);if(!paramNameSlice.length){paramNameSlice=paramName;}
paramNameSet.push(paramNameSlice);}}else{paramNameSet=paramName;}
data.originalFiles=data.files;$.each(fileSet||data.files,function(index,element){var newData=$.extend({},data);newData.files=fileSet?element:[element];newData.paramName=paramNameSet[index];newData.submit=function(){newData.jqXHR=this.jqXHR=(that._trigger('submit',e,this)!==false)&&that._onSend(e,this);return this.jqXHR;};return(result=that._trigger('add',e,newData));});return result;},_replaceFileInput:function(input){var inputClone=input.clone(true);$('<form></form>').append(inputClone)[0].reset();input.after(inputClone).detach();$.cleanData(input.unbind('remove'));this.options.fileInput=this.options.fileInput.map(function(i,el){if(el===input[0]){return inputClone[0];}
return el;});if(input[0]===this.element[0]){this.element=inputClone;}},_handleFileTreeEntry:function(entry,path){var that=this,dfd=$.Deferred(),errorHandler=function(e){if(e&&!e.entry){e.entry=entry;}
dfd.resolve([e]);},dirReader;path=path||'';if(entry.isFile){if(entry._file){entry._file.relativePath=path;dfd.resolve(entry._file);}else{entry.file(function(file){file.relativePath=path;dfd.resolve(file);},errorHandler);}}else if(entry.isDirectory){dirReader=entry.createReader();dirReader.readEntries(function(entries){that._handleFileTreeEntries(entries,path+entry.name+'/').done(function(files){dfd.resolve(files);}).fail(errorHandler);},errorHandler);}else{dfd.resolve([]);}
return dfd.promise();},_handleFileTreeEntries:function(entries,path){var that=this;return $.when.apply($,$.map(entries,function(entry){return that._handleFileTreeEntry(entry,path);})).pipe(function(){return Array.prototype.concat.apply([],arguments);});},_getDroppedFiles:function(dataTransfer){dataTransfer=dataTransfer||{};var items=dataTransfer.items;if(items&&items.length&&(items[0].webkitGetAsEntry||items[0].getAsEntry)){return this._handleFileTreeEntries($.map(items,function(item){var entry;if(item.webkitGetAsEntry){entry=item.webkitGetAsEntry();if(entry){entry._file=item.getAsFile();}
return entry;}
return item.getAsEntry();}));}
return $.Deferred().resolve($.makeArray(dataTransfer.files)).promise();},_getSingleFileInputFiles:function(fileInput){fileInput=$(fileInput);var entries=fileInput.prop('webkitEntries')||fileInput.prop('entries'),files,value;if(entries&&entries.length){return this._handleFileTreeEntries(entries);}
files=$.makeArray(fileInput.prop('files'));if(!files.length){value=fileInput.prop('value');if(!value){return $.Deferred().resolve([]).promise();}
files=[{name:value.replace(/^.*\\/,'')}];}
return $.Deferred().resolve(files).promise();},_getFileInputFiles:function(fileInput){if(!(fileInput instanceof $)||fileInput.length===1){return this._getSingleFileInputFiles(fileInput);}
return $.when.apply($,$.map(fileInput,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments);});},_onChange:function(e){var that=e.data.fileupload,data={fileInput:$(e.target),form:$(e.target.form)};that._getFileInputFiles(data.fileInput).always(function(files){data.files=files;if(that.options.replaceFileInput){that._replaceFileInput(data.fileInput);}
if(that._trigger('change',e,data)!==false){that._onAdd(e,data);}});},_onPaste:function(e){var that=e.data.fileupload,cbd=e.originalEvent.clipboardData,items=(cbd&&cbd.items)||[],data={files:[]};$.each(items,function(index,item){var file=item.getAsFile&&item.getAsFile();if(file){data.files.push(file);}});if(that._trigger('paste',e,data)===false||that._onAdd(e,data)===false){return false;}},_onDrop:function(e){e.preventDefault();var that=e.data.fileupload,dataTransfer=e.dataTransfer=e.originalEvent.dataTransfer,data={};that._getDroppedFiles(dataTransfer).always(function(files){data.files=files;if(that._trigger('drop',e,data)!==false){that._onAdd(e,data);}});},_onDragOver:function(e){var that=e.data.fileupload,dataTransfer=e.dataTransfer=e.originalEvent.dataTransfer;if(that._trigger('dragover',e)===false){return false;}
if(dataTransfer){dataTransfer.dropEffect='copy';}
e.preventDefault();},_initEventHandlers:function(){var ns=this.options.namespace;if(this._isXHRUpload(this.options)){this.options.dropZone.bind('dragover.'+ns,{fileupload:this},this._onDragOver).bind('drop.'+ns,{fileupload:this},this._onDrop);this.options.pasteZone.bind('paste.'+ns,{fileupload:this},this._onPaste);}
this.options.fileInput.bind('change.'+ns,{fileupload:this},this._onChange);},_destroyEventHandlers:function(){var ns=this.options.namespace;this.options.dropZone.unbind('dragover.'+ns,this._onDragOver).unbind('drop.'+ns,this._onDrop);this.options.pasteZone.unbind('paste.'+ns,this._onPaste);this.options.fileInput.unbind('change.'+ns,this._onChange);},_setOption:function(key,value){var refresh=$.inArray(key,this._refreshOptionsList)!==-1;if(refresh){this._destroyEventHandlers();}
$.Widget.prototype._setOption.call(this,key,value);if(refresh){this._initSpecialOptions();this._initEventHandlers();}},_initSpecialOptions:function(){var options=this.options;if(options.fileInput===undefined){options.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]');}else if(!(options.fileInput instanceof $)){options.fileInput=$(options.fileInput);}
if(!(options.dropZone instanceof $)){options.dropZone=$(options.dropZone);}
if(!(options.pasteZone instanceof $)){options.pasteZone=$(options.pasteZone);}},_create:function(){var options=this.options;$.extend(options,$(this.element[0].cloneNode(false)).data());options.namespace=options.namespace||this.widgetName;this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=this._loaded=this._total=0;this._initEventHandlers();},destroy:function(){this._destroyEventHandlers();$.Widget.prototype.destroy.call(this);},enable:function(){var wasDisabled=false;if(this.options.disabled){wasDisabled=true;}
$.Widget.prototype.enable.call(this);if(wasDisabled){this._initEventHandlers();}},disable:function(){if(!this.options.disabled){this._destroyEventHandlers();}
$.Widget.prototype.disable.call(this);},add:function(data){var that=this;if(!data||this.options.disabled){return;}
if(data.fileInput&&!data.files){this._getFileInputFiles(data.fileInput).always(function(files){data.files=files;that._onAdd(null,data);});}else{data.files=$.makeArray(data.files);this._onAdd(null,data);}},send:function(data){if(data&&!this.options.disabled){if(data.fileInput&&!data.files){var that=this,dfd=$.Deferred(),promise=dfd.promise(),jqXHR,aborted;promise.abort=function(){aborted=true;if(jqXHR){return jqXHR.abort();}
dfd.reject(null,'abort','abort');return promise;};this._getFileInputFiles(data.fileInput).always(function(files){if(aborted){return;}
data.files=files;jqXHR=that._onSend(null,data).then(function(result,textStatus,jqXHR){dfd.resolve(result,textStatus,jqXHR);},function(jqXHR,textStatus,errorThrown){dfd.reject(jqXHR,textStatus,errorThrown);});});return this._enhancePromise(promise);}
data.files=$.makeArray(data.files);if(data.files.length){return this._onSend(null,data);}}
return this._getXHRPromise(false,data&&data.context);}});}));(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var Utils=require('./Utils'),Alerts=require('./alerts'),Bootstrap=require('./bootstrap.jsx'),DatasetWizard=require('./DatasetWizardComponents.jsx'),EnsembleWizard=require('./EnsembleWizardComponents.jsx'),EnsembleWizardRoot=EnsembleWizard.WizardRoot,BootstrapModal=Bootstrap.Modal,BootstrapButton=Bootstrap.Button,BootstrapAlert=Bootstrap.Alert,FileInfo=DatasetWizard.FileInfo,DatasetWizardRoot=DatasetWizard.WizardRoot,MetaData=DatasetWizard.MetaData,Router;var CurrentStatusReact=React.createClass({displayName:'CurrentStatusReact',render:function(){var classes="label ",message=null,status=this.props.status;if(this.props.parseLog&&this.props.status!=='Ready'){message=this.props.parseLog.get('message');}
if(this.props.status==='Parsing'){classes+="label-info";}else if(this.props.status==='Ready'){if(this.props.file_format==='UNSUPPORTED'){status='Unsupported';classes+="label-important";}else{classes+="label-success";}}else if(this.props.status==='Parse Failed'){classes+="label-important";}
return(React.DOM.div({className:"span5"},React.DOM.span({className:classes},status),React.DOM.span({className:"dm-current-state"},message)));}});var AccordionHeadReact=React.createClass({displayName:'AccordionHeadReact',clearAlert:function(){this.props.df.unset('rename-request');this.props.df.unset('delete-request');},handleDataFileDelete:function(){this.props.handleDataFileDelete(this.props.df);},render:function(){var df=this.props.df;var headBody=null,alert=null;var head=null;if(df.get('delete-request')==='done'){alert=BootstrapAlert({type:"success",message:"File <strong>"+df.get('name')+"</strong> has been successfully deleted.",handleClose:this.handleDataFileDelete});}else{if(df.get('delete-request')==='fail'){alert=BootstrapAlert({type:"error",message:Alerts.msg.simpleError,handleClose:this.clearAlert});}
if(df.get('delete-request')==='before'){headBody=React.DOM.div({className:"ajax-loader"});}else{headBody=(React.DOM.div({className:"row-fluid"},React.DOM.div({className:"span3"},React.DOM.div({className:"dm-filename dm-col-offset"},React.DOM.strong(null,df.get('name')),this.props.df.get('shared')?React.DOM.label({className:"label label-warning no-float"},"Shared"):'')),CurrentStatusReact({status:df.get('state'),file_format:df.get('file_format'),parseLog:df.parseLogs.last()}),React.DOM.div({className:"span2 text-center"},df.get('datasets').length),React.DOM.div({className:"span2 text-center"},React.DOM.span({className:"btn btn-mini btn-dark"},React.DOM.i({className:"icon icon-white icon-info-sign"})," Details"))));}
head=(React.DOM.a({className:"accordion-toggle "+this.props.classes,onClick:this.props.handleHeadClick},React.DOM.div({className:"dm-item"},headBody)));}
if(df.get('rename-request')==='done'){alert=BootstrapAlert({type:"success",message:"File has been successfully renamed.",handleClose:this.clearAlert});}else if(df.get('rename-request')==='fail'){alert=BootstrapAlert({type:"error",message:Alerts.msg.simpleError,handleClose:this.clearAlert});}
return(React.DOM.div({className:"accordion-heading"},alert,head));}});var ShowLogsReact=React.createClass({displayName:'ShowLogsReact',render:function(){var df=this.props.df,logs=null,messages=null;if(df.get('state')==='Ready'){messages=df.parseLogs.pluck('message');}
return(React.DOM.div(null,React.DOM.div({className:"collapse",id:"logs-"+df.id},React.DOM.div({className:"dm-logs"},React.DOM.h4(null,"Log"),React.DOM.div({className:"dm-logs-list custom-scroll"},messages))),React.DOM.span({className:"show-logs collapsed",'data-toggle':"collapse",'data-target':"#logs-"+df.id},React.DOM.i({className:"icon icon-white icon-list-alt"}))));}});var MetaDataColumn=React.createClass({displayName:'MetaDataColumn',render:function(){var df=this.props.df,metaData=null,file_format=df.get('file_format'),messages=null;if(df.get('state')==='Parsing'||file_format==='UNSUPPORTED'){messages=df.parseLogs.pluck('message');metaData=React.DOM.div({className:"span3 dm-logs-full"},React.DOM.h4(null,"Log"),messages);}else if(df.needReparse()){metaData=React.DOM.div({className:"span3"},Alerts.msg.datafileNeedReparse);}else{metaData=(React.DOM.div({className:"span3"},React.DOM.h4(null,"Meta data"),MetaData({df:df}),ShowLogsReact({df:df})));}
return metaData;}});var DatasetEnsemblesLiReact=React.createClass({displayName:'DatasetEnsemblesLiReact',render:function(){return(React.DOM.li({className:"clearfix"},React.DOM.span({className:"pull-right"},React.DOM.strong(null,"Models:")," ",this.props.ensemble.models_count),React.DOM.strong(null,React.DOM.i({className:"icon icon-white icon-chevron-right"}),React.DOM.a({href:"/train-ensemble/"+this.props.ensemble.id},"Ensemble #",this.props.ensemble.id))));}});var LiPopOver=React.createClass({displayName:'LiPopOver',componentDidMount:function(){var props=this.props;var filters=JSON.parse(props.filters);var icons={normalize:'<i class="icon icon-white icon-signal"></i> Normalize',shuffle:'<i class="icon icon-white icon-random"></i> Shuffle',split:'<i class="icon icon-white icon-resize-full"></i> Split',balance:'<i class="icon icon-white icon-tasks"></i> Balance',merge:'<i class="icon icon-white icon-resize-small"></i> Merge',binarize:'<i class="icon icon-white icon-random"></i> Binarize',};var html_content="<ul class='ul-dataset'>";var column=false;var filter_display;$(filters).each(function(n,filter){if((filter.name=="permute"||filter.name=="ignore")&&column==false){filter_display='<i class="icon icon-white icon-indent-right"></i> Column Select';column=true;}
else if(filter.name=='split'){filter_display=icons[filter.name]+" Start: "+filter.start+"%, End: "+filter.end+"%";}
else if(filter.name=="balance"){filter_display=icons[filter.name]+" ("+filter.sample+" "+filter.adjust[0]+"%)";}
else if(filter.name=="merge"){var id=filter.datas[0];var name;$(props.dfs.models).each(function(i,mo){if(mo.id==id)
name=mo.attributes.name;});filter_display=icons[filter.name]+" (#"+id+" "+name+")";}
else if(filter.name!="permute"&&filter.name!="ignore"){filter_display=icons[filter.name];}
else
return false;html_content+="<li>"+filter_display+"</li>";});html_content+="</ul>";var options={title:'Filters Applied',trigger:'hover',placement:'left',content:html_content,container:'body',html:true,}
$(this.getDOMNode()).popover(options);},render:function(){return(React.DOM.li(null,this.props.children))},});var DatasetLiReact=React.createClass({displayName:'DatasetLiReact',getInitialState:function(){return{ensembles:null};},getEnsemblesList:function(e){e.preventDefault();var id=this.props.key,self=this;$.ajax({url:'/api/ensemble/?dataset='+id,type:'GET',dataType:'json'}).done(function(data){self.setState({ensembles:data});self.props.loadEnsembles(data,id);self.props.handleChange();}).fail(function(xhr){console.log('fail');});},openConfirmModal:function(e){e.preventDefault();this.refs.confirmModal.open();},closeConfirmModal:function(){this.refs.confirmModal.close();},openWarningModal:function(){this.refs.warningModal.open();},closeWarningModal:function(){this.refs.warningModal.close();},deleteDataset:function(){this.closeConfirmModal();var self=this;$.ajax({url:'/api/dataset/'+this.props.key+'/',type:'DELETE',dataType:'json'}).done(function(data){self.props.handleDelete(self);}).fail(function(request,status,error){if(error==='BAD REQUEST'){self.openWarningModal();}});},render:function(){var modalDelete=null;return(LiPopOver({filters:this.props.filters,dfs:this.props.dfs},React.DOM.div(null,React.DOM.span({className:"dataset-remove pull-right",onClick:this.openConfirmModal,title:"Delete this dataset"},React.DOM.i({className:"icon icon-white icon-remove"})),React.DOM.span({className:"datasets-list-action",onClick:this.getEnsemblesList},React.DOM.i({className:"icon icon-white icon-chevron-right"}),React.DOM.strong(null,this.props.name," "))),BootstrapModal({ref:"confirmModal",confirm:"Delete",cancel:"Cancel",confirmButtonClass:"btn-danger",onCancel:this.closeConfirmModal,onConfirm:this.deleteDataset,title:"Delete dataset "+this.props.name},React.DOM.p(null,"If you delete Dataset #",this.props.key,", you will no longer have access to it and it will be removed permanently from your Datasets list.")),BootstrapModal({ref:"warningModal",cancel:"Close",onCancel:this.closeWarningModal,title:"Error"},React.DOM.p(null,"This dataset has ensembles, delete not allowed.")),BootstrapModal({ref:"try",cancel:"Close",title:"Error"},React.DOM.p(null,"Check this out."))));}});var DataFileEnsemblesReact=React.createClass({displayName:'DataFileEnsemblesReact',getInitialState:function(){return{ensembles:[],loader:false};},componentDidMount:function(){var df=this.props.df;var self=this;$.ajax({url:'/api/ensemble/?data='+df.id,type:'GET',dataType:'json'}).done(function(data){self.setState({ensembles:data});}).fail(function(xhr){console.log('fail');});},openConfirmModal:function(id){this.refs['confirmModal'+id].open();return false;},closeConfirmModal:function(id){this.refs['confirmModal'+id].close();},deleteEnsemble:function(en){this.closeConfirmModal(en.id);var self=this;this.setState({loader:true});$.ajax({url:'/api/ensemble/'+en.id+'/',type:'DELETE',dataType:'json'}).done(function(data){$('.ensemble-list-item[id="ens'+en.id+'"]').hide();self.setState({loader:false});}).fail(function(xhr){self.setState({loader:false});});},render:function(){var self=this;var loader=this.state.loader?React.DOM.div({className:"ajax-loader"}):null;var ensemblesList=this.state.ensembles.map(function(ensemble){return(React.DOM.li({key:ensemble.id},React.DOM.div({className:"ensemble-list-item",id:"ens"+ensemble.id},React.DOM.span({className:"dataset-remove pull-right",onClick:self.openConfirmModal.bind(self,ensemble.id),title:"Delete this ensemble"},React.DOM.i({className:"icon icon-white icon-remove"})),React.DOM.a({href:"/train-ensemble/"+ensemble.id},React.DOM.i({className:"icon icon-white icon-chevron-right"}),"Ensemble #",ensemble.id)),BootstrapModal({ref:"confirmModal"+ensemble.id,confirm:"Delete",cancel:"Cancel",confirmButtonClass:"btn-danger",onCancel:self.closeConfirmModal.bind(self,ensemble.id),onConfirm:self.deleteEnsemble.bind(self,ensemble),title:"Delete ensemble #"+ensemble.id},React.DOM.p(null,"If you delete this ensemble, you will no longer have access to it and it will be removed permanently."))));});return(React.DOM.div({className:"ensembles-list-wrap"},ensemblesList.length?React.DOM.h4(null,"Ensembles created from this data"):'',React.DOM.ul({className:"ensembles-list"},ensemblesList),loader));}});var EnsembleUlReact=React.createClass({displayName:'EnsembleUlReact',getInitialState:function(){return{classes:'',ensemblesList:[],currentDatasetId:null};},handleChange:function(){this.setState({classes:'active'});},deleteDataset:function(dataset){var df=this.props.df;var datasets=this.props.datasets.filter(function(d){return d.id!==dataset.props.key;});df.set('datasets',datasets);},handleBack:function(e){e.preventDefault();this.setState({classes:''});},loadEnsembles:function(ensembles,id){var ens=ensembles.map(function(ensemble){return DatasetEnsemblesLiReact({ensemble:ensemble,key:ensemble.id});});this.setState({ensemblesList:ens,currentDatasetId:id});},render:function(){var df=this.props.df,self=this;var datasets=this.props.datasets.map(function(dataset){return DatasetLiReact({df:df,key:dataset.id,name:dataset.name,handleChange:self.handleChange,handleDelete:self.deleteDataset,loadEnsembles:self.loadEnsembles,filters:dataset.filters,dfs:self.props.dfs});});var ensembles=this.state.ensemblesList;return(React.DOM.div({className:"span4"},React.DOM.div({className:"row datasets-and-ensembles"},React.DOM.div({className:"span6"},React.DOM.div({className:"slide-container"},React.DOM.div({className:"slide "+this.state.classes},datasets.length?React.DOM.h4(null,"Datasets created from this data"):'',React.DOM.ul({className:"datasets-list"},datasets)),React.DOM.div({className:"slide "+this.state.classes},React.DOM.h4(null,"Ensembles trained on Dataset #",this.state.currentDatasetId),React.DOM.ul({className:"dm-file-meta datasets-ensembles"},ensembles.length?ensembles:React.DOM.p(null,"No ensembles created yet.")),React.DOM.div({className:"controls"},React.DOM.a({href:"#",onClick:this.handleBack,className:"btn btn-mini btn-back pull-left"},React.DOM.i({className:"icon icon-white icon-chevron-left"}),"Back to Datasets"))))),React.DOM.div({className:"span6"},DataFileEnsemblesReact({df:df,key:df.id})))));}});var FileActionsReact=React.createClass({displayName:'FileActionsReact',openModal:function(e){e.preventDefault();this.refs.modal.open();},closeModal:function(){this.refs.modal.close();},deleteDataFile:function(){var df=this.props.df;this.closeModal();df.beforeDeleteRequest();$.ajax({url:'/api/data/'+df.id+'/',type:'DELETE',dataType:'json'}).done(function(data){df.deleteRequestDone(data);}).fail(function(xhr){df.deleteRequestFail(xhr);});},reparse:function(e){e.preventDefault();var df=this.props.df,oldState=df.get('state');$.ajax({url:'/api/data/'+df.id+'/parse/',type:'POST',dataType:'json',contentType:'application/json'}).done(function(data){df.set(data);}).fail(function(xhr){df.set('state',oldState);});},runWizard:function(e){e.preventDefault();Router.navigate("data-wizard/"+this.props.df.id+'/',{trigger:true});},handleCreateEnsemble:function(e){e.preventDefault();var url="ensemble-wizard/"+this.props.df.id+'/step/model-select/';Router.navigate(url,{trigger:true});},render:function(){var btnStart=null,btnRemove=null,btnReparse=null,df=this.props.df,btnNewDataset=null,btnShare=null;if(df.get('state')==='Ready'&&this.props.file_format!=='UNSUPPORTED'&&!df.needReparse()){if(df.get('datasets')&&df.get('datasets').length>0&&!df.isTimeseriesWithoutOutput()){btnNewDataset=React.DOM.li(null,React.DOM.a({hrefa:"#",onClick:this.handleCreateEnsemble,className:"btn btn-mini btn-info"},React.DOM.i({className:"icon icon-white icon-th"}),"Create Ensemble"));}
btnStart=React.DOM.li(null,BootstrapButton({className:"btn btn-mini btn-success",href:"#",onClick:this.runWizard},React.DOM.i({className:"icon icon-white icon-ok"}),"Create Dataset"));}
if(this.props.df.needReparse()&&this.props.df.get('state')!=='Parsing'){btnReparse=React.DOM.li(null,BootstrapButton({className:"btn btn-mini btn-info",href:"#",onClick:this.reparse},React.DOM.i({className:"icon icon-white icon-repeat"}),"Reparse"));}
if(!this.props.df.get('shared')){btnRemove=React.DOM.li(null,BootstrapButton({className:"btn btn-mini btn-danger",href:"#",onClick:this.openModal},React.DOM.i({className:"icon icon-white icon-trash"}),"Remove"));}
if(userAdmin&&!this.props.df.get('shared')){btnShare=React.DOM.li(null,BootstrapButton({className:"btn btn-mini btn-warning",href:"#",onClick:df.share.bind(df)},React.DOM.i({className:"icon icon-white icon-share-alt"}),"Share"));}
return(React.DOM.div(null,React.DOM.ul({className:"dm-file-meta"},btnStart,btnNewDataset,btnReparse,btnRemove,btnShare),BootstrapModal({ref:"modal",confirm:"Delete",cancel:"Cancel",confirmButtonClass:"btn-danger",onCancel:this.closeModal,onConfirm:this.deleteDataFile,title:"Delete file "+this.props.df.get('name')},React.DOM.p(null,"If you delete this file, you will no longer have access to it and it will be removed permanently from your Data list."))));}});var FileRenameReact=React.createClass({displayName:'FileRenameReact',openModal:function(e){e.preventDefault();this.refs.modal.open();},closeModal:function(){this.refs.modal.close();},getInitialState:function(){return{text:this.props.df.get('name')};},onChange:function(e){this.setState({text:e.target.value});},renameDataFile:function(){var df=this.props.df;var filename=this.state.text;this.closeModal();$.ajax({url:'/api/data/'+df.id+'/',type:'PATCH',data:JSON.stringify({name:filename},null,2),dataType:'json',contentType:'application/json'}).done(function(data){df.set('name',data.name);df.renameRequestDone(data);}).fail(function(xhr){df.renameRequestFail(xhr);});},render:function(){return(React.DOM.div(null,React.DOM.div({className:"meta-string"},React.DOM.i({className:"icon icon-white icon-edit"}),React.DOM.a({href:"#",onClick:this.openModal},"Rename")),BootstrapModal({ref:"modal",classes:"modal-mini",confirm:"Rename",cancel:"Cancel",confirmButtonClass:"btn-success",onCancel:this.closeModal,onConfirm:this.renameDataFile,title:"Rename data file"},React.DOM.p(null,"Please provide new filename:"),React.DOM.input({type:"text",onChange:this.onChange,value:this.state.text,className:"rename-input"}))));}});var AccordionBodyReact=React.createClass({displayName:'AccordionBodyReact',render:function(){var df=this.props.df,visibilityClass="",renameComponent=null;if(df.get('delete-request')==='before'||df.get('delete-request')==='done'){visibilityClass+="hide";}
if(!this.props.df.get('shared')){renameComponent=FileRenameReact({df:df});}
return(React.DOM.div({className:"accordion-body"},React.DOM.div({className:"accordion-inner"},React.DOM.div({className:"dm-details "+visibilityClass},React.DOM.div({className:"row-fluid"},React.DOM.div({className:"span3 dm-col-offset"},React.DOM.h4(null,"File info"),renameComponent,FileInfo({df:df,status:df.get('state')})),MetaDataColumn({df:df}),EnsembleUlReact({datasets:df.get('datasets'),df:df,dfs:this.props.dfs}),React.DOM.div({className:"span2 text-center"},React.DOM.h4(null,"Actions"),FileActionsReact({file_format:df.get('file_format'),df:df})))))));}});var ReactCSSTransitionGroup=React.addons.CSSTransitionGroup;var AccordionGroupReact=React.createClass({displayName:'AccordionGroupReact',getInitialState:function(){return{classes:'collapsed',body:[]};},handleHeadClick:function(){this.props.handleClick(this.props.df);},render:function(){var df=this.props.df,body=[],classes='';if(this.props.showBody){body=[AccordionBodyReact({key:this.props.df.id,df:this.props.df,dfs:this.props.dfs})];}else{classes='collapsed';}
return(React.DOM.div({className:"accordion-group"},AccordionHeadReact({df:this.props.df,handleDataFileDelete:this.props.handleDataFileDelete,handleHeadClick:this.handleHeadClick,classes:classes}),ReactCSSTransitionGroup({transitionName:"expand"},body)));}});var DataFileListReact=React.createClass({displayName:'DataFileListReact',showTour:function(){var dfs=this.props.dfs;if(!getCookie('tourwasplayed-datafile-upload')){if((dfs.where({state:"Ready"}).length-dfs.where({state:"Ready",shared:true}).length)===1){launchTour("<h1>Congratulations! You've uploaded your first dataset to Ersatz</h1><hr>Now that you have a dataset, you should split it into training and testing sets by clicking on the \"Create dataset\" button",'datafile-upload');}}},componentDidMount:function(){initTour();scrollToDataset();this.showTour();},componentDidUpdate:function(){this.showTour();},getInitialState:function(){return{filterString:''};},filterName:function(name){name=name.toLowerCase();var filterString=this.state.filterString.toLowerCase();return(name.indexOf(filterString)!=-1);},filterChange:function(event){this.setState({filterString:event.target.value});},filterNotEmpty:function(element){return typeof element!="undefined";},handleDataFileDelete:function(df){this.props.dfs.remove(df);},render:function(){var self=this,showBody;var accordion=this.props.dfs.map(function(df){showBody=(df.id===self.props.showBodyDataFile);if(self.filterName(df.get('name'))){return(AccordionGroupReact({df:df,key:df.id,dfs:self.props.dfs,handleDataFileDelete:self.handleDataFileDelete,handleClick:self.props.handleDataFileSelect,showBody:showBody}));}}).filter(this.filterNotEmpty);return(React.DOM.div({className:"row-fluid"},React.DOM.div({className:"span12"},FindFileReact({handleChange:this.filterChange}),React.DOM.div({className:"dm-header"},React.DOM.div({className:"row-fluid"},React.DOM.div({className:"span3"},React.DOM.span({className:"dm-col-offset"},"Filename ")),React.DOM.div({className:"span5"},"Current status & Latest log info"),React.DOM.div({className:"span2 text-center"},"Number of datasets"),React.DOM.div({className:"span2 text-center"},"Actions"))),React.DOM.div({className:"accordion",id:"dm-list"},accordion.length?accordion:React.DOM.h4(null,"No matches found")))));}});var FindFileReact=React.createClass({displayName:'FindFileReact',render:function(){return(React.DOM.div({className:"search-panel"},React.DOM.span({className:"icon icon-white icon-search"}),React.DOM.input({type:"text",placeholder:"Search by filename",className:"search-box",onChange:this.props.handleChange})));}});var RootComponent=React.createClass({displayName:'RootComponent',mixins:[Utils.BackboneMixin],getBackboneModels:function(){var collections=[this.props.dfs,this.props.datasetWizard,this.props.ensembleWizard];this.props.dfs.forEach(function(df){collections.push(df.parseLogs);});return collections;},getInitialState:function(){return{filterString:'',showBodyDataFile:undefined};},handleDataFileSelect:function(df){if(df.id===this.state.showBodyDataFile){this.setState({showBodyDataFile:false});}else{this.setState({showBodyDataFile:df.id});}},render:function(){Router=this.props.router;switch(this.props.router.currentRoute){case"dataWizard":return DatasetWizardRoot({wizard:this.props.datasetWizard,dfs:this.props.dfs,handleDataFileSelect:this.handleDataFileSelect});case"ensWizard":return EnsembleWizardRoot({wizard:this.props.ensembleWizard,dfs:this.props.dfs});default:return DataFileListReact({showBodyDataFile:this.state.showBodyDataFile,dfs:this.props.dfs,handleDataFileSelect:this.handleDataFileSelect});}}});module.exports=RootComponent;},{"./DatasetWizardComponents.jsx":4,"./EnsembleWizardComponents.jsx":6,"./Utils":7,"./alerts":8,"./bootstrap.jsx":9}],2:[function(require,module,exports){"use strict";var DMComponent=require('./DMComponent.jsx');var DatasetWizard=require('./DatasetWizard.js');var EnsembleWizard=require('./EnsembleWizard.js');var Utils=require('./Utils.js');var ParseLogs=Backbone.Collection.extend({comparator:'timestamp',});var DataFile=Backbone.Model.extend({constructor:function(){this.parseLogs=new ParseLogs();Backbone.Model.apply(this,arguments);},parse:function(response){response.created=new Date(response.created);this.parseLogs.add(response.parse_logs,{merge:true});delete response.parse_logs;return response;},share:function(){if(!window.confirm("Share this datafile?\nYou will not be able to change this datafile or unshare it.\nAll datasets associated with this datafile will be also shared.")){return;}
var df=this;$.ajax({url:'/api/data/'+df.id+'/share/',type:'POST',dataType:'json',contentType:'application/json'}).done(function(){df.fetch();}).fail(function(xhr){console.log('fail');});},isTimeseriesWithoutOutput:function(){return(this.get('file_format')==='TIMESERIES'&&this.get('meta').output_size===0);},needReparse:function(){return this.get('state')=='Action required';},beforeDeleteRequest:function(){this.set('delete-request','before');},deleteRequestDone:function(){this.set('delete-request','done');},deleteRequestFail:function(){this.set('delete-request','fail');},renameRequestDone:function(){this.set('rename-request','done');},renameRequestFail:function(){this.set('rename-request','fail');}});var DataFileList=Backbone.Collection.extend({model:DataFile,url:function(){return'/api/data/';}});function connect(url,auth_json,dfs){var sock=new SockJS(url);sock.onopen=function(){sock.send(JSON.stringify(auth_json));};sock.onmessage=function(e){var data=JSON.parse(e.data),df;switch(data.type){case'parse_log':df=dfs.get(data.df_id);if(df){df.parseLogs.add(data.data,{merge:true});}
break;case'data_file_update':data.data.created=new Date(data.data.created);df=dfs.get(data.data.id);if(df){df.set(data.data);}
break;}};}
function listenUploadData(){var form=$("#upload_form"),key='',filename,percent;return form.fileupload({dataType:"xml",add:function(event,data){var fileSize=(data.files[0].size/1024/1024).toFixed();var acceptFileTypes=/(\.|\/)(ts|ts.gz|ts.bz|ts.bz2|csv|csv.gz|csv.bz|csv.bs2|tar.gz|tar.bz|tar.bz2|zip)$/i;if(!acceptFileTypes.test(data.originalFiles[0].name)){$('#uploadHelp').modal();}else if(fileSize>1024){$('#uploadSizeError').modal();}else{$('.btn').attr('disabled',true).on('click',function(){return false;});data.submit();}},send:function(event,data){$('.progress').show();},progress:function(event,data){percent=(Math.round((event.loaded/event.total)*1000)/10);$('.progress .bar').css('width',percent+"%");$('.progress-info-complete').text(Math.round(percent)+"%");$('.progress-info-filesize').text(Humanize.fileSize(event.loaded)+' / '+Humanize.fileSize(event.total));},fail:function(event,data){window.location.replace("/dashboard/");},done:function(event,data){window.location.replace("/dashboard/");}});}
$(function(){var dfs=new DataFileList(),datasetWizard=new DatasetWizard(),ensembleWizard=new EnsembleWizard(),component,Router,router;Router=Backbone.Router.extend({routes:{"":"home","data-wizard/:id/":"dataWizard","ensemble-wizard/:id/step/:name/":"ensWizard"},home:function(){this.currentRoute="home";datasetWizard.reset();ensembleWizard.reset();$('#dmHeading').removeClass('hide');$('#dataUpload').removeClass('hide').addClass('show');},dataWizard:function(id){this.currentRoute="dataWizard";datasetWizard.setInitValues(dfs.get(id),dfs);$('#dmHeading, #dataUpload').removeClass('show').addClass('hide');},ensWizard:function(id,name){var df=dfs.get(id);if(df===undefined||!(name in ensembleWizard.steps)){router.navigate('',{trigger:true});return;}
if(ensembleWizard.get('dataFile')&&df.id===ensembleWizard.get('dataFile').id){if(ensembleWizard.steps[name]<ensembleWizard.steps[ensembleWizard.get('currentStep')]){ensembleWizard.set('currentStep',name);return;}
if(ensembleWizard.get('currentStep')===name){return;}}
this.navigate('ensemble-wizard/'+df.id+'/step/model-select/');this.currentRoute="ensWizard";ensembleWizard.setInitValues(df,dfs);$('#dmHeading, #dataUpload').removeClass('show').addClass('hide');},});router=new Router();datasetWizard.router=router;ensembleWizard.router=router;dfs.fetch({'success':function(){Backbone.history.start({pushState:true,root:"/dashboard/"});React.renderComponent(DMComponent({dfs:dfs,datasetWizard:datasetWizard,ensembleWizard:ensembleWizard,router:router}),document.getElementById('df-list'));}});connect(wsUrl,{token:wsToken,salt:wsSalt},dfs);listenUploadData();});},{"./DMComponent.jsx":1,"./DatasetWizard.js":3,"./EnsembleWizard.js":5,"./Utils.js":7}],3:[function(require,module,exports){"use strict";var SplitFilter=require('./filters/split.js');var MergeFilter=require('./filters/merge.js');var NormalizeFilter=require('./filters/normalize.js');var ShuffleFilter=require('./filters/shuffle.js');var BinarizeFilter=require('./filters/binarize.js');var ColumnSelectFilter=require('./filters/columnSelect.js');var BalanceFilter=require('./filters/balance.js');var register=[ColumnSelectFilter,NormalizeFilter,ShuffleFilter,MergeFilter,BalanceFilter,BinarizeFilter,SplitFilter,];Array.prototype.move=function(from,to){this.splice(to,0,this.splice(from,1)[0]);};var Wizard=Backbone.Model.extend({setInitValues:function(df,dfs){var Model,self=this,filter,lastColumnIsOutput=((df.get('file_format')==='GENERAL')&&(df.get('meta').last_column_info.classes!==null));this.reset();this.set({state:'select-filter',dataFile:df});this.dfs=dfs;this.filtersForDismiss=[];this.set('lastColumnIsOutput',lastColumnIsOutput);for(var i=0;i<register.length;i++){Model=register[i];filter=new Model({wizard:self});if(filter.isApplicable()){this.filterRegister[filter.name]=filter;this.filtersAllowed.push(filter.name);}}
if(df.get('file_format')==='GENERAL')
this.selectFilter(this.filterRegister['column select']);this.trigger('change');},reset:function(){var id=this.id;this.clear();this.set({id:id});this.filterRegister=[];this.filtersAllowed=[];this.filtersApplied=[];this.dfs=undefined;},filterRegister:{},filtersAllowed:[],filtersApplied:[],filtersForDismiss:[],states:['select-filter','setup-filter','update-filter'],getNextFilters:function(){var self=this,Filter;return this.filtersAllowed.map(function(name){return self.filterRegister[name];});},getCurrentFilter:function(){return this.get('currentFilter');},selectFilter:function(filter){this.set({currentFilter:filter,state:'setup-filter'});},showOutputFilter:function(filter){var state='setup-filter';for(var i=0;i<this.filtersApplied.length;i++){if(this.filtersApplied[i]==='column select'){this.filtersApplied.splice(i,1);state="update-filter";}}
this.set({currentFilter:this.filterRegister['column select'],state:state});},applyFilter:function(filter){var allFilters=[_.keys(this.filterRegister)],self=this,temp;this.filtersApplied.push(filter.name);this.filtersApplied.move(this.filtersApplied.length-1,this.get('currentFilterPos'));var filter_pos=this.filtersApplied.indexOf("column select");if(filter_pos>-1)
this.filtersApplied.move(filter_pos,this.filtersApplied.length-1);filter_pos=this.filtersApplied.indexOf("balance");if(filter_pos>-1)
this.filtersApplied.move(filter_pos,0);filter_pos=this.filtersApplied.indexOf("split");if(filter_pos>-1)
this.filtersApplied.move(filter_pos,0);for(var i=0;i<this.filtersApplied.length;i++){allFilters.push(self.filterRegister[self.filtersApplied[i]].allowedAfterThisFilter);}
temp=_.intersection.apply(null,allFilters);this.filtersAllowed=_.difference(temp,this.filtersApplied);this.set({state:'select-filter',currentFilter:undefined});this.set('finish-request','');},selectFilterForUpdate:function(filter){var filter_pos;for(var i=0;i<this.filtersApplied.length;i++){if(this.filtersApplied[i]===filter.name){this.filtersApplied.splice(i,1);filter_pos=i;}}
this.set({currentFilter:filter,state:'update-filter',currentFilterPos:filter_pos});this.set('finish-request','');},cancelUpdate:function(filter){this.filtersApplied.push(this.getCurrentFilter().name);var filter_pos=this.filtersApplied.indexOf("column select");if(filter_pos>-1)
this.filtersApplied.move(filter_pos,this.filtersApplied.length-1);filter_pos=this.filtersApplied.indexOf("balance");if(filter_pos>-1)
this.filtersApplied.move(filter_pos,0);filter_pos=this.filtersApplied.indexOf("split");if(filter_pos>-1)
this.filtersApplied.move(filter_pos,0);this.set({state:'select-filter',currentFilter:undefined});this.set('finish-request','');},cancelSelect:function(filter){this.set({state:'select-filter',currentFilter:undefined});this.set('finish-request','');},resetFilter:function(filter){this.filtersApplied.splice(this.filtersApplied.indexOf(filter.name),1);this.filtersAllowed.push(filter.name);if(filter.name=='column select')
this.outputs=false;if(!this.getCurrentFilter()||this.getCurrentFilter()==filter){this.set({state:'select-filter',currentFilter:undefined});this.set('finish-request','');}
this.trigger('change');},resetAllFilters:function(){this.filtersAllowed=_.keys(this.filterRegister);this.filtersApplied=[];this.set({state:'select-filter',currentFilter:undefined});this.set('finish-request','');this.trigger('change');},beforeFinish:function(){this.set('finish-request','before');},doneFinish:function(data){var df=this.get('dataFile'),datasets=df.get('datasets');if($.isArray(data)){for(var i=0;i<data.length;i++){datasets.push({id:data[i].id,name:data[i].name,last_column_is_output:data[i].last_column_is_output,filters:data[i].filters});}}else{datasets.push({id:data.id,name:data.name,last_column_is_output:data.last_column_is_output,filters:JSON.stringify(data.filters)});}
df.set('datasets',datasets);df.set('isNewDatasetCreated',true);this.router.navigate('',{trigger:true});this.set('finish-request','done');},failFinish:function(){this.set('finish-request','fail');},finish:function(){var data=[],self=this;for(var i=0;i<this.filtersApplied.length;i++){data=self.filterRegister[self.filtersApplied[i]].dump(data);}
if(data.length===0||data[0].filters===undefined){console.log('length 0 ');data={name:self.get('firstDatasetName'),filters:data,data:self.get('dataFile').id};if(self.get('dataFile').get('file_format')==='GENERAL'){data.last_column_is_output=self.get('lastColumnIsOutput');}}else{if(self.get('dataFile').get('file_format')==='GENERAL'){data[0].last_column_is_output=self.get('lastColumnIsOutput');data[1].last_column_is_output=self.get('lastColumnIsOutput');}
data[0]['filters']=data[0]['filters'].concat(data.slice(2));data[1]['filters']=data[1]['filters'].concat(data.slice(2));data=data.slice(0,2);}
console.log(JSON.stringify(data,null,2));this.beforeFinish();$.ajax({url:'/api/dataset/',type:'POST',data:JSON.stringify(data,null,2),dataType:'json',contentType:'application/json'}).done(function(data){self.doneFinish(data);}).fail(function(xhr){self.failFinish(xhr);});}});module.exports=Wizard;},{"./filters/balance.js":10,"./filters/binarize.js":13,"./filters/columnSelect.js":15,"./filters/merge.js":18,"./filters/normalize.js":20,"./filters/shuffle.js":22,"./filters/split.js":24}],4:[function(require,module,exports){"use strict";var Utils=require('./Utils');var Alerts=require('./alerts');var Bootstrap=require('./bootstrap.jsx');var BootstrapModal=Bootstrap.Modal;var columnSelect=require('./filters/columnSelectComponent.jsx');var outputColumns=columnSelect.outputColumns;var TimeseriesMetaReact=React.createClass({displayName:'TimeseriesMetaReact',render:function(){var meta=this.props.meta,df=this.props.df;return(React.DOM.ul({className:"dm-file-meta"},React.DOM.li(null,React.DOM.strong(null,"Available models:")," MRNN"),React.DOM.li(null,React.DOM.strong(null,"Min Timesteps:")," ",meta.min_timesteps),React.DOM.li(null,React.DOM.strong(null,"Max Timesteps:")," ",meta.max_timesteps),React.DOM.li(null,React.DOM.strong(null,"Features:")," ",meta.input_size),React.DOM.li(null,React.DOM.strong(null,"Outputs:")," ",meta.output_size),React.DOM.li(null,React.DOM.strong(null,"Samples:")," ",Humanize.intComma(meta.data_rows))));}});var GeneralMetaReact=React.createClass({displayName:'GeneralMetaReact',render:function(){var meta=this.props.meta,archivePath=null,lastCol,df=this.props.df;if(meta.hasOwnProperty('archive_path')){archivePath=React.DOM.li(null,React.DOM.strong(null,"File in archive:")," ",meta.archive_path);}
if(meta.last_column_info.classes){lastCol="Last column contains "+Object.keys(meta.last_column_info.classes).length+" classes";}else{lastCol="Last column contains more than 200 classes or non-integer values";}
return(React.DOM.ul({className:"dm-file-meta"},React.DOM.li(null,React.DOM.strong(null,"Available models:")," Autoencoder, Deepnets"),React.DOM.li(null,React.DOM.strong(null,"Samples:")," ",Humanize.intComma(meta.data_rows)),React.DOM.li(null,React.DOM.strong(null,"Columns:")," ",meta.num_columns),React.DOM.li(null,React.DOM.strong(null,"Classes:")," ",lastCol),archivePath,React.DOM.li(null,React.DOM.strong(null,"Header:")," ",(meta.with_header)?"Yes":"No")));}});var ImagesMetaReact=React.createClass({displayName:'ImagesMetaReact',render:function(){var meta=this.props.meta,df=this.props.df;return(React.DOM.ul({className:"dm-file-meta"},React.DOM.li(null,React.DOM.strong(null,"Available models:")," ConvNet"),React.DOM.li(null,React.DOM.strong(null,"Samples:")," ",Utils.sum(_.values(meta.classes))),React.DOM.li(null,React.DOM.strong(null,"Classes:")," ",Object.keys(meta.classes).length)));}});var MetaData=React.createClass({displayName:'MetaData',render:function(){var df=this.props.df,metaData=null,file_format=df.get('file_format');if(file_format==='TIMESERIES'){return TimeseriesMetaReact({meta:df.get('meta'),df:df});}else if(file_format==='GENERAL'){return GeneralMetaReact({meta:df.get('meta'),df:df});}else if(file_format==='IMAGES'){return ImagesMetaReact({meta:df.get('meta'),df:df});}else{return React.DOM.div({className:"span3"});}}});var FileInfoItem=React.createClass({displayName:'FileInfoItem',render:function(){return(React.DOM.div(null,React.DOM.i({className:"icon icon-white "+this.props.iconClasses}),React.DOM.strong(null,this.props.label,":"),React.DOM.span(null,this.props.value)));}});var FileInfo=React.createClass({displayName:'FileInfo',render:function(){var df=this.props.df;var date=Utils.isoDateToHumanize(df.get('created'));var fileID=null,fileDate=null,fileSize=null,fileType=null;if(this.props.status==='Ready'){fileSize=React.DOM.li(null,FileInfoItem({iconClasses:"icon-resize-full",label:"File size",value:Humanize.fileSize(df.get('meta').size?df.get('meta').size:0)}));fileType=React.DOM.li(null,FileInfoItem({iconClasses:"icon-star",label:"Data type",value:Humanize.capitalize(df.get('file_format').toLowerCase())}));}
fileID=React.DOM.li(null,FileInfoItem({iconClasses:"icon-file",label:"ID",value:df.id}));fileDate=React.DOM.li(null,FileInfoItem({iconClasses:"icon-calendar",label:"Date upload",value:date}));return(React.DOM.ul({className:"dm-file-meta"},fileID,fileDate,fileSize,fileType));}});var StatusPanel=React.createClass({displayName:'StatusPanel',displayOutput:function(){},drop:function(e){var filter=this.props.wizard.getCurrentFilter();if(filter&&filter.name=="column select")
this.refs.outputColumns.drop(e);},render:function(){var df=this.props.df;var filter=this.props.wizard.getCurrentFilter();if(filter&&filter.name=="column select")
return(React.DOM.div({className:"panel panel-secondary",onDrop:this.drop},React.DOM.div({className:"panel-heading"},React.DOM.h2(null,"Output Columns")),React.DOM.div({className:"panel-body"},outputColumns({ref:"outputColumns",filter:filter,wizard:this.props.wizard}))));else
return(React.DOM.div({className:"panel panel-secondary"},React.DOM.div({className:"panel-heading"},React.DOM.h2(null,"Data information")),React.DOM.div({className:"panel-body"},FileInfo({df:df,status:df.get('state')}),MetaData({df:df}))));}});var SelectFilter=React.createClass({displayName:'SelectFilter',handleFinish:function(e){e.preventDefault();this.refs.modal.open();},openModal:function(e){e.preventDefault();this.refs.modal.open();},closeModal:function(){this.refs.modal.close();},getInitialState:function(){return{text:this.props.wizard.get('dataFile').get('name').split('.')[0]};},onChange:function(e){this.setState({text:e.target.value});},handleLastColumnChange:function(e){this.props.wizard.set('lastColumnIsOutput',e.target.checked);},setDataFileName:function(){this.props.wizard.set('firstDatasetName',this.state.text);this.props.wizard.finish();this.refs.modal.close();},toOutput:function(){this.closeModal();this.props.wizard.showOutputFilter();},render:function(){var loader=null,message=null,setNameInput=null,setNameHeader=null,lastColumnComponent=null;if(this.props.wizard.get('finish-request')==='before'){loader=(React.DOM.div({className:"overlay"},React.DOM.div({className:"ajax-loader"})));}else if(this.props.wizard.get('finish-request')==='fail'){loader=null;message=React.DOM.div({className:"alert alert-danger"},Alerts.msg.simpleError);}else{loader=null;message=null;}
if(this.props.df.get('file_format')==='GENERAL'){if(this.props.wizard.outputs!=true){lastColumnComponent=(React.DOM.div({className:"no-output alert"},React.DOM.p({className:"main-message"},"You haven't selected any output"),React.DOM.p(null,"Datasets without output can only be used for Autoencoder and prediction."),React.DOM.a({className:"btn btn-warning",href:"#",onClick:this.toOutput},"Return to output selection")));}else{lastColumnComponent=(React.DOM.div(null));}}
if($.inArray('split',this.props.wizard.filtersApplied)!==-1){var splitFilter=this.props.wizard.filterRegister.split;setNameHeader="Datasets names";setNameInput=(React.DOM.div(null,React.DOM.h5(null,"Datasets will be created with following names:"),React.DOM.p(null,React.DOM.strong(null,"Dataset 1:")," ",splitFilter.get('filenameFirst')),React.DOM.p(null,React.DOM.strong(null,"Dataset 2:")," ",splitFilter.get('filenameSecond'))));}else{setNameHeader="Set name for dataset";setNameInput=(React.DOM.div(null,React.DOM.h5(null,"Please provide a name:"),React.DOM.input({type:"text",onChange:this.onChange,value:this.state.text,className:"rename-input"})));}
var filters=this.props.wizard.getNextFilters().map(function(filter){return filter.getHeadComponent();});return(React.DOM.div(null,loader," ",message,React.DOM.div({className:"panel-body-step clearfix"},React.DOM.div({className:"filters"},filters.length?filters:React.DOM.p(null,"All filters already applied")),React.DOM.div({className:filters.length?'filters-apply':'filters-apply filters-apply-simple'},React.DOM.span({className:"choose"},"Choose filter"),React.DOM.span({className:"or"},"- or -"),React.DOM.a({href:"#",className:"filter-finish",onClick:this.handleFinish},React.DOM.i({className:"icon icon-white icon-flag"}),"Create Dataset"))),BootstrapModal({ref:"modal",classes:"modal-mini",confirm:"OK",cancel:"Cancel",confirmButtonClass:"btn-success",onCancel:this.closeModal,onConfirm:this.setDataFileName,title:setNameHeader},setNameInput,lastColumnComponent)));}});var SetupFilter=React.createClass({displayName:'SetupFilter',render:function(){var component=this.props.wizard.getCurrentFilter().getBodyComponent(this.props.status),filterInvalid=this.props.wizard.get('filterInvalid'),currentFilterName=this.props.wizard.get('currentFilter').name,mainBtn=null,classes='filters-apply ',cancelBtn=(React.DOM.a({href:"#",className:"filter-finish",onClick:this.props.handleCancelClick},React.DOM.i({className:"icon icon-white icon-remove"}),"Cancel"));if(this.props.wizard.get('state')==='update-filter'){mainBtn=(React.DOM.a({href:"#",className:filterInvalid?"filter-finish disabled":"filter-finish",onClick:this.props.handleNextClick},"Update",React.DOM.i({className:"icon icon-white icon-chevron-right"})));}else{mainBtn=(React.DOM.a({href:"#",className:filterInvalid?"filter-finish disabled":"filter-finish",onClick:this.props.handleNextClick},"Next step",React.DOM.i({className:"icon icon-white icon-chevron-right"})));}
if(currentFilterName==='shuffle'||currentFilterName==='normalize'){classes+='filters-apply-simple';}
return(React.DOM.div({className:"panel-body-step panel-body-step2 clearfix"},component,React.DOM.div({className:classes},React.DOM.div({className:"choose"},"Choose parameters"),cancelBtn,mainBtn)));}});var ActionPanel=React.createClass({displayName:'ActionPanel',nextClick:function(e){e.preventDefault();if(this.props.wizard.get('filterInvalid')){return false;}else{this.props.wizard.applyFilter(this.props.wizard.getCurrentFilter());}
flexboxHack();},cancelUpdateClick:function(e){e.preventDefault();this.props.wizard.cancelUpdate(this.props.wizard.getCurrentFilter());},cancelSelectClick:function(e){e.preventDefault();this.props.wizard.cancelSelect();},render:function(){var state=this.props.wizard.get('state'),component=null;if(state==='select-filter'){component=SelectFilter({wizard:this.props.wizard,df:this.props.df});}else if(state==='setup-filter'){component=SetupFilter({wizard:this.props.wizard,handleNextClick:this.nextClick,handleCancelClick:this.cancelSelectClick,dfs:this.props.dfs,status:this.props.status.refs.status});}else{component=SetupFilter({wizard:this.props.wizard,handleNextClick:this.nextClick,handleCancelClick:this.cancelUpdateClick,dfs:this.props.dfs,status:this.props.status.refs.status});}
return(React.DOM.div({className:"panel panel-primary panel-blue"},React.DOM.div({className:"panel-heading"},React.DOM.h2(null,"Data transformation")),React.DOM.div({className:"panel-body"},component)));}});var ResultPanel=React.createClass({displayName:'ResultPanel',resetClick:function(){this.props.wizard.resetAllFilters();},render:function(){var component=null,self=this,filters,visibilityClass='';if(this.props.wizard.filtersApplied.length===0&&this.props.wizard.filtersForDismiss.length===0){component=(React.DOM.div({className:"panel-body"},React.DOM.div({className:"panel-note panel-note-offset"},React.DOM.p(null,"No filters applied yet."),React.DOM.p(null,"A list of filters which have already been applied to your data will be shown. You can always modify them."))));}else{if(this.props.wizard.get('state')==='update-filter'){filters=this.props.wizard.filtersApplied.map(function(name){return self.props.wizard.filterRegister[name].getAppliedComponent('applied');});filters.push(self.props.wizard.get('currentFilter').getAppliedComponent('update'));for(var i=0;i<this.props.wizard.filtersForDismiss.length;i++){filters.push(self.props.wizard.filterRegister[self.props.wizard.filtersForDismiss[i]].getAppliedComponent('dismiss'));}}else{filters=this.props.wizard.filtersApplied.map(function(name){return self.props.wizard.filterRegister[name].getAppliedComponent();});}
if(this.props.wizard.get('state')==='update-filter'){var last_pos=self.props.wizard.get('currentFilterPos');if(last_pos>-1){filters.move(filters.length-1,last_pos);}}
filters.reverse();var resetBtn=(React.DOM.button({className:"filter-finish",onClick:this.resetClick},React.DOM.i({className:"icon icon-white icon-remove"}),"Reset all filters"));component=(React.DOM.div({className:"panel-body"},React.DOM.p({className:"panel-note"},"Click on filter to update:"),React.DOM.div({className:"filters"},filters,resetBtn)));}
if(this.props.wizard.get('currentFilter')!==undefined&&this.props.wizard.get('currentFilter').name==='column select'){visibilityClass='hide';}
return(React.DOM.div({className:"panel panel-secondary panel-blue "+visibilityClass},React.DOM.div({className:"panel-heading"},React.DOM.h2(null,"Filters Applied")),component));}});var WizardRoot=React.createClass({displayName:'WizardRoot',showTour:function(){var dfs=this.props.dfs;if(!getCookie('tourwasplayed-dataset-created')){if(dfs.findWhere({isNewDatasetCreated:true})){launchTour("Congrats, now you can train a model by clicking on the Create Ensemble button",'dataset-created');}}},componentDidMount:function(){initTour();this.showTour();},componentDidUpdate:function(){this.showTour();},render:function(){var df=this.props.wizard.get('dataFile');return(React.DOM.div(null,React.DOM.a({href:"/dashboard/",className:"btn btn-mini btn-info btn-wizard-back"},React.DOM.i({className:"icon icon-white icon-chevron-left"}),"Back to Dashboard"),React.DOM.div({className:"wizard clearfix"},StatusPanel({df:df,wizard:this.props.wizard,ref:"status"}),ActionPanel({df:df,wizard:this.props.wizard,dfs:this.props.dfs,status:this}),ResultPanel({df:df,wizard:this.props.wizard}))));}});module.exports={WizardRoot:WizardRoot,FileInfo:FileInfo,MetaData:MetaData};},{"./Utils":7,"./alerts":8,"./bootstrap.jsx":9,"./filters/columnSelectComponent.jsx":16}],5:[function(require,module,exports){"use strict";var ParamsModels=require('./params/Models.js');var Wizard=Backbone.Model.extend({steps:{'model-select':1,'model-setup':2,'model-params':3},setInitValues:function(df,dfs){this.reset();this.set({currentStep:'model-select',dataFile:df});this.dfs=dfs;this.trigger('change');},reset:function(){var id=this.id;this.clear();this.set({id:id});this.dfs=undefined;},selectModel:function(model){this.set({currentModel:model,currentStep:'model-setup'});this.router.navigate('ensemble-wizard/'+this.get('dataFile').id+'/step/model-setup/',{trigger:true});},selectModelSetup:function(){var name=this.getModelName(),model=ParamsModels.getModel(name);if(this.get('currentOutputNonlin')=='LINEARGAUSSIAN'){model.attributes.out_nonlin='LINEARGAUSSIAN';for(var i=0;i<model.layers.length;i++){model.layers.models[i].switch_uniform_init=true;model.layers.models[i].out_nonlin='LINEARGAUSSIAN';}}
this.set('model',model);this.set({currentStep:'model-params'});this.router.navigate('ensemble-wizard/'+this.get('dataFile').id+'/step/model-params/',{trigger:true});},finish:function(options){var trainDatasetId=this.get('currentTrainDataset')||null,testDatasetId=this.get('currentTestDataset')||null,self=this;$.ajax({url:'/api/ensemble/',data:JSON.stringify({train_dataset:trainDatasetId,test_dataset:testDatasetId},null,2),type:'POST',dataType:'json',contentType:'application/json'}).done(function(data){self.createModel(data.id,options);}).fail(function(xhr){});},getModelName:function(){var name=this.get('currentModel'),nonlin=this.get('currentNonlin');if(name==="DEEPNET"){return nonlin;}
return name;},createModel:function(ensembleId,options){var model=this.get('model'),outputNonlin=this.get('currentOutputNonlin');var name=this.getModelName(),self=this,model_params=model.dumpParams();if(outputNonlin==='LINEARGAUSSIAN'){for(var i=0;i<model_params.layers.length;i++)
delete model_params.layers[i].out_nonlin;}
var data={ensemble:ensembleId,model_params:model_params,model_name:name,out_nonlin:outputNonlin};$.ajax({url:'/api/model/',data:JSON.stringify(data,null,2),type:'POST',dataType:'json',contentType:'application/json'}).done(function(data){self.set({currentStep:'finished'});if(options&&options.start){$.ajax({url:'/api/ensemble/'+ensembleId+'/resume/',type:'POST',dataType:'json',contentType:'application/json'}).always(function(data){window.location.href='/train-ensemble/'+ensembleId+'/';});}else{window.location.href='/train-ensemble/'+ensembleId+'/';}}).fail(function(xhr){});}});module.exports=Wizard;},{"./params/Models.js":27}],6:[function(require,module,exports){"use strict";var Utils=require('./Utils.js'),DatasetWizard=require('./DatasetWizardComponents.jsx'),Bootstrap=require('./bootstrap.jsx'),FileInfo=DatasetWizard.FileInfo,MetaData=DatasetWizard.MetaData,BootstrapSelect=Bootstrap.SimpleSelect,BootstrapAlert=Bootstrap.Alert;var StatusPanel=React.createClass({displayName:'StatusPanel',render:function(){var df=this.props.df;return(React.DOM.div({className:"panel panel-secondary"},React.DOM.div({className:"panel-heading"},React.DOM.h2(null,"Data information")),React.DOM.div({className:"panel-body"},FileInfo({df:df,status:df.get('state')}),MetaData({df:df}))));}});var TimeseriesModels=React.createClass({displayName:'TimeseriesModels',tooltipCreate:function(e){$(e.target).tooltip({placement:'bottom',container:'body',delay:200,title:this.props.title});},tooltipDestroy:function(e){$(e.target).tooltip('destroy');},render:function(){return(React.DOM.div({className:"filters"},React.DOM.a({href:"#",onClick:this.props.handleClick.bind(null,'MRNN'),onMouseEnter:this.tooltipCreate,onMouseLeave:this.tooltipDestroy,'data-toggle':"tooltip",title:"An MRNN is a special type of Recurrent Neural"+' '+"Network that has \"Multiplicative\" units. It"+' '+"is optimized using a method called Hessian Free"+' '+"Optimization as opposed to the more normally used"+' '+"Stochastic Gradient Descent. This particular model"+' '+"is very useful for time series problems – In fact,"+' '+"it is only used for time series problems. If you have"+' '+"time series data, this is the model you should choose."},"MRNN")));}});var GeneralModels=React.createClass({displayName:'GeneralModels',tooltipCreate:function(e){$(e.target).tooltip({placement:'bottom',container:'body',delay:200,title:this.props.title});},tooltipDestroy:function(e){$(e.target).tooltip('destroy');},render:function(){return(React.DOM.div({className:"filters"},React.DOM.a({href:"#",onClick:this.props.handleClick.bind(null,'DEEPNET'),onMouseEnter:this.tooltipCreate,onMouseLeave:this.tooltipDestroy,'data-toggle':"tooltip",title:"This is a standard feed forward neural network,"+' '+"also known as a Multilayer Perceptron (MLP) and"+' '+"a Deep Neural Network (DNN). If your data has"+' '+"labels and you are going to predict values with"+' '+"your model, you should choose this one."},"DeepNet"),React.DOM.a({href:"#",onClick:this.props.handleClick.bind(null,'AUTOENCODER'),onMouseEnter:this.tooltipCreate,onMouseLeave:this.tooltipDestroy,'data-toggle':"tooltip",title:"An autoencoder is a type of unsupervised neural network."+' '+"If your data is unlabeled and you are looking to perform"+' '+"dimensionality reduction or feature extraction, you should"+' '+"use this. You can think of it as a more powerful PCA"},"Autoencoder")));}});var ImagesModels=React.createClass({displayName:'ImagesModels',tooltipCreate:function(e){$(e.target).tooltip({placement:'bottom',container:'body',delay:200,title:this.props.title});},tooltipDestroy:function(e){$(e.target).tooltip('destroy');},render:function(){return(React.DOM.div({className:"filters"},React.DOM.a({href:"#",onClick:this.props.handleClick.bind(null,'CONV'),onMouseEnter:this.tooltipCreate,onMouseLeave:this.tooltipDestroy,'data-toggle':"tooltip",title:"A Convolutional Neural Network (CNN) is a special"+' '+"type of neural network used specifically for image"+' '+"problems. It differs from normal neural networks in several"+' '+"ways. Specifically: it consists of an input (your images),"+' '+"a set of \"convolutional/pooling/normalization\" block layers,"+' '+"a set of standard neural network layers, and an output layer."+' '+"Bottom line: If you have image problems, try the convolutional"+' '+"neural network. They are state of the art."},"Convolutional")));}});var SelectModelStep=React.createClass({displayName:'SelectModelStep',handleClick:function(modelName,e){e.preventDefault();this.props.wizard.selectModel(modelName);},render:function(){var df=this.props.df,file_format=df.get('file_format'),component=null;switch(file_format){case'TIMESERIES':component=TimeseriesModels({handleClick:this.handleClick});break;case'GENERAL':component=GeneralModels({handleClick:this.handleClick});break;case'IMAGES':component=ImagesModels({handleClick:this.handleClick});break;default:component=React.DOM.div(null);}
return(React.DOM.div({className:"panel-body-step"},React.DOM.div({className:"panel-body-step1"},React.DOM.p({className:"intro-text"},"Based on the dataset you’ve selected, the following models are available to you:"),component,React.DOM.div({className:"filters-apply"},React.DOM.div(null,"Choose model")))));}});var MrnnSetup=React.createClass({displayName:'MrnnSetup',mixins:[Utils.TrainTestDatasetMixin],getInitialState:function(){return{numTimesteps:'',nonlinVal:0,trainDataset:this.getDefaultTrainDatasetId(),testDataset:this.getDefaultTestDatasetId()};},handleOnChangeNonlin:function(e){this.setState({nonlinVal:e.target.value});},handleOnChangeTestDataset:function(e){this.setState({testDataset:e.target.value});},handleOnChangeTrainDataset:function(e){this.setState({trainDataset:e.target.value});},handleOnChangeNumTimesteps:function(e){this.setState({numTimesteps:e.target.value});},render:function(){var datasets=this.props.datasets,nonlin=[[0,'Softmax'],[1,'Sigmoid'],[2,'Sigmoid w/ MSE loss'],[3,'Linear w/ MSE loss']];return(React.DOM.div(null,React.DOM.div({className:"row-fluid"},React.DOM.div({className:"span6"},React.DOM.h4({className:"select-item"},"Train set"),BootstrapSelect({value:this.state.trainDataset,values:datasets,handleChange:this.handleOnChangeTrainDataset})),React.DOM.div({className:"span6"},React.DOM.h4({className:"select-item"},"Test set"),BootstrapSelect({value:this.state.testDataset,values:datasets,handleChange:this.handleOnChangeTestDataset}))),React.DOM.div({className:"divider"}),React.DOM.h4({className:"select-item"},"Nonlinearity"),BootstrapSelect({value:this.state.nonlinVal,values:nonlin,handleChange:this.handleOnChangeNonlin}),React.DOM.div({className:"divider"}),React.DOM.h4({className:"select-item"},"Number of timesteps to use"),React.DOM.input({value:this.state.numTimesteps,onChange:this.handleOnChangeNumTimesteps,placeholder:"Leave blank for all timesteps",className:"input-dark input-center"})));}});var ConvSetup=React.createClass({displayName:'ConvSetup',mixins:[Utils.TrainTestDatasetMixin],getInitialState:function(){return{trainDataset:this.getDefaultTrainDatasetId(),testDataset:this.getDefaultTestDatasetId()};},handleOnChangeTestDataset:function(e){this.setState({testDataset:e.target.value});},handleOnChangeTrainDataset:function(e){this.setState({trainDataset:e.target.value});},render:function(){var datasets=this.props.datasets;return(React.DOM.div(null,React.DOM.div({className:"row-fluid"},React.DOM.div({className:"span6"},React.DOM.h4({className:"select-item"},"Train set"),BootstrapSelect({value:this.state.trainDataset,values:datasets,handleChange:this.handleOnChangeTrainDataset})),React.DOM.div({className:"span6"},React.DOM.h4({className:"select-item"},"Test set"),BootstrapSelect({value:this.state.testDataset,values:datasets,handleChange:this.handleOnChangeTestDataset})))));}});var AutoencoderSetup=React.createClass({displayName:'AutoencoderSetup',mixins:[Utils.TrainTestDatasetMixin],getInitialState:function(){return{trainDataset:this.getDefaultTrainDatasetId(),};},handleOnChangeTrainDataset:function(e){this.setState({trainDataset:e.target.value});},render:function(){var datasets=this.props.datasets;return(React.DOM.div(null,React.DOM.h4({className:"select-item"},"Train set"),BootstrapSelect({value:this.state.trainDataset,values:datasets,handleChange:this.handleOnChangeTrainDataset})));}});var DeepnetSetup=React.createClass({displayName:'DeepnetSetup',mixins:[Utils.TrainTestDatasetMixin],getInitialState:function(){var outputNonlinOptions=this.getOutputNonlinOptions();return{nonlinVal:"MLP_RECTIFIED",outputNonlinVal:outputNonlinOptions[0]&&outputNonlinOptions[0][0],trainDataset:this.getDefaultTrainDatasetId(),testDataset:this.getDefaultTestDatasetId()};},handleOnChangeNonlin:function(e){this.setState({nonlinVal:e.target.value});},handleOnChangeTasks:function(e){this.setState({outputNonlinVal:e.target.value});},handleOnChangeTestDataset:function(e){this.setState({testDataset:e.target.value});},handleOnChangeTrainDataset:function(e){this.setState({trainDataset:e.target.value});},getOutputNonlinOptions:function(){var meta=this.props.df.get('meta'),options=[];if(meta.last_column_info.unique>200){options=[['LINEARGAUSSIAN','Regression']];}else if(meta.dtypes[meta.dtypes.length-1]==='s'){options=[['SOFTMAX','Classification']];}else{options=[['SOFTMAX','Classification'],['LINEARGAUSSIAN','Regression']];}
return options;},render:function(){var datasets=this.props.datasets,outputNonlinOptions=this.getOutputNonlinOptions(),nonlin=[['MLP_RECTIFIED','Rectified Linear'],['MLP_SIGMOID','Sigmoid'],['MLP_MAXOUT','Maxout'],['MLP_MAXOUT_CONV','Maxout Convolutional']];return(React.DOM.div(null,React.DOM.div({className:"row-fluid"},React.DOM.div({className:"span6"},React.DOM.h4({className:"select-item"},"Train set"),BootstrapSelect({value:this.state.trainDataset,values:datasets,handleChange:this.handleOnChangeTrainDataset})),React.DOM.div({className:"span6"},React.DOM.h4({className:"select-item"},"Test set"),BootstrapSelect({value:this.state.testDataset,values:datasets,handleChange:this.handleOnChangeTestDataset}))),React.DOM.div({className:"divider"}),React.DOM.div({className:"row-fluid"},React.DOM.div({className:"span6"},React.DOM.h4({className:"select-item"},"Activation function"),BootstrapSelect({value:this.state.nonlinVal,values:nonlin,handleChange:this.handleOnChangeNonlin})),React.DOM.div({className:"span6"},React.DOM.h4({className:"select-item"},"Task"),BootstrapSelect({value:this.state.outputNonlinVal,values:outputNonlinOptions,handleChange:this.handleOnChangeTasks})))));}});var SetupModelStep=React.createClass({displayName:'SetupModelStep',handleClick:function(e){e.preventDefault();var wizard=this.props.wizard;wizard.set({'currentNonlin':this.refs.setup.state.nonlinVal,'currentNumTimesteps':this.refs.setup.state.numTimesteps,'currentTestDataset':this.refs.setup.state.testDataset,'currentTrainDataset':this.refs.setup.state.trainDataset,'currentOutputNonlin':this.refs.setup.state.outputNonlinVal});wizard.selectModelSetup();},handleBackClick:function(e){e.preventDefault();var datasetId=this.props.wizard.get('dataFile').id,url="ensemble-wizard/"+datasetId+'/step/model-select/';this.props.wizard.router.navigate(url,{trigger:true});flexboxHack();},render:function(){var wizard=this.props.wizard,dfs=this.props.dfs,df=this.props.df,component=null,datasets,currentModel=wizard.get('currentModel'),cmp,next=null,back=null;datasets=dfs.where({file_format:df.get('file_format')}).filter(function(val){cmp=Utils.compareMetaData(df.get('meta'),val.get('meta'));return cmp&&!val.isTimeseriesWithoutOutput()&&df.id!=val.id;}).map(function(val){return val.get('datasets');});datasets.unshift(df.get('datasets'));datasets=_.flatten(datasets).filter(function(d){if(currentModel==='DEEPNET'){return d.last_column_is_output;}
return true;}).map(function(d){return[d.id,d.name];});if(datasets.length>0){switch(currentModel){case'MRNN':component=MrnnSetup({ref:"setup",datasets:datasets});break;case'CONV':component=ConvSetup({ref:"setup",datasets:datasets});break;case'DEEPNET':component=DeepnetSetup({ref:"setup",datasets:datasets,df:df});break;case'AUTOENCODER':component=AutoencoderSetup({ref:"setup",datasets:datasets});break;}
back=(React.DOM.a({href:"#",className:"filter-finish",onClick:this.handleBackClick},React.DOM.i({className:"icon icon-white icon-chevron-left"}),"Back"));next=(React.DOM.a({href:"#",className:"filter-finish",onClick:this.handleClick},"Next step",React.DOM.i({className:"icon icon-white icon-chevron-right"})));}else{next=React.DOM.div(null,"You need a test dataset. Create it first.");}
return(React.DOM.div({className:"panel-body-step"},React.DOM.div({className:"panel-body-step1"},React.DOM.div({className:"text-center"},component,back," ",next))));}});var ParamsStep=React.createClass({displayName:'ParamsStep',mixins:[Utils.BackboneMixin],getBackboneModels:function(){return this.props.wizard.get('model').getBackboneModels();},getInitialState:function(){return{advanced:false};},handleBackClick:function(e){e.preventDefault();var datasetId=this.props.wizard.get('dataFile').id,url="ensemble-wizard/"+datasetId+'/step/model-setup/';this.props.wizard.router.navigate(url,{trigger:true});flexboxHack();},handleAdvanced:function(e){e.preventDefault();this.setState({advanced:true});},handleFinish:function(options,e){this.props.wizard.finish(options);},render:function(){var paramsComponent,finish=null;var back=(React.DOM.a({href:"#",className:"filter-finish",onClick:this.handleBackClick},React.DOM.i({className:"icon icon-white icon-chevron-left"}),"Back"));if(this.state.advanced){paramsComponent=this.props.wizard.get('model').getComponent();var isValid=this.props.wizard.get('model').isParamsValid();if(isValid){finish=(React.DOM.a({href:"#",className:"filter-finish",onClick:this.handleFinish},React.DOM.i({className:"icon icon-white icon-flag"}),"Finish"));}
return(React.DOM.div(null,paramsComponent,React.DOM.div({className:"simple-finish"},back," ",finish)));}else{return(React.DOM.div(null,React.DOM.div({className:"hyperparams-step"},React.DOM.h4(null,"Time to choose your model hyperparameters..."),React.DOM.p(null,"Would you like us to intelligently choose them for you?"),React.DOM.p(null,"Or would you like to choose them yourself? (advanced)"),React.DOM.a({href:"#",className:"filter-finish",onClick:this.handleFinish.bind(this,{start:true})},"CHOOSE FOR ME"),React.DOM.a({href:"#",className:"filter-finish",onClick:this.handleAdvanced},"LET ME DO IT ",React.DOM.small(null,"(I’m a professional...)")),React.DOM.div({className:"clear"},back))));}}});var ActionPanel=React.createClass({displayName:'ActionPanel',render:function(){var wizard=this.props.wizard,component=null,header=null;switch(wizard.get('currentStep')){case'model-select':component=SelectModelStep({df:this.props.df,wizard:this.props.wizard});header=React.DOM.h2(null,"Select Model");break;case'model-setup':component=SetupModelStep({df:this.props.df,wizard:this.props.wizard,dfs:this.props.dfs});header=React.DOM.h2(null,"Setup ",Humanize.capitalize(wizard.get('currentModel').toLowerCase()));break;case'model-params':component=ParamsStep({df:this.props.df,wizard:this.props.wizard});header=React.DOM.h2(null,"Setup ",Humanize.capitalize(wizard.get('currentModel').toLowerCase()));break;}
return(React.DOM.div({className:"panel panel-primary panel-blue"},React.DOM.div({className:"panel-heading"},header),React.DOM.div({className:"panel-body"},component)));}});var ResultPanel=React.createClass({displayName:'ResultPanel',resetClick:function(){this.props.wizard.resetAllFilters();},render:function(){var wizard=this.props.wizard,stepsClasses='';if(wizard.get('currentStep')==='model-select'){stepsClasses='step step1';}else if(wizard.get('currentStep')==='model-setup'){stepsClasses='step step2';}else if(wizard.get('currentStep')==='model-params'){stepsClasses='step step3';}
return(React.DOM.div({className:"panel panel-secondary panel-blue"},React.DOM.div({className:"panel-heading"},React.DOM.h2(null,"Steps")),React.DOM.div({className:"panel-body"},React.DOM.ul({className:"steps-completed"},React.DOM.li(null,"Completed wizard steps:"),React.DOM.li({className:stepsClasses},React.DOM.i({className:"icon icon-white"}),React.DOM.strong(null,"Step #1:")," Select a model"),React.DOM.li({className:stepsClasses},React.DOM.i({className:"icon icon-white"}),React.DOM.strong(null,"Step #2:")," Select data sets for training"),React.DOM.li({className:stepsClasses},React.DOM.i({className:"icon icon-white"}),React.DOM.strong(null,"Step #3:")," Set params for your model")))));}});var WizardNotes=React.createClass({displayName:'WizardNotes',getInitialState:function(){return{show:true};},showAlert:function(){this.setState({show:true});},closeAlert:function(){$(this).hide();this.setState({show:false});},render:function(){var wizard=this.props.wizard,message='',alert=null;if(wizard.get('currentStep')==='model-select'){message="In order to train a model, you'll need to select a model \
                        architecture that's compatible with the data you've provided. \
                        If you're not sure, it's OK to click on any of them &mdash; they are \
                        all compatible with your data.";}else if(wizard.get('currentStep')==='model-setup'){message="It's important to set aside some of your data for \"testing\" \
                        and \"validation\". These are both used to test the reliability of your \
                        results &mdash; even though a model might learn your data perfectly, \
                        it doesn't matter if it doesn't work on unseen examples.";}else if(wizard.get('currentStep')==='model-params'){message="Hyperparameters are settings that must be set for a model to train \
                        correctly. For instance, \"learning rate\" is a common parameter that \
                        controls the \"speed of learning\" &mdash; note, faster is not always better... \
                        <br><br> \
                        To make things less complicated, we provide functionality that chooses \
                        good parameters for you by training several different models. \
                        <br><br> \
                        If you are not familiar with deep learning, we suggest letting us pick \
                        them for you...";}
if(this.state.show){alert=BootstrapAlert({message:message,type:"wizard",handleClose:this.closeAlert});}else{alert=(React.DOM.a({href:"#",className:"show-wizard-help",onClick:this.showAlert},React.DOM.i({className:"icon icon-white icon-info-sign"})," Show help messages"));}
return(React.DOM.div(null,alert));}});var WizardRoot=React.createClass({displayName:'WizardRoot',componentDidMount:function(){initTour();},render:function(){var df=this.props.wizard.get('dataFile');return(React.DOM.div(null,React.DOM.a({href:"/dashboard/",className:"btn btn-mini btn-info btn-wizard-back"},React.DOM.i({className:"icon icon-white icon-chevron-left"}),"Back to Dashboard"),React.DOM.div({className:"wizad-messages"},WizardNotes({df:df,wizard:this.props.wizard})),React.DOM.div({className:"wizard wizard-ensembles clearfix"},StatusPanel({df:df}),ActionPanel({df:df,wizard:this.props.wizard,dfs:this.props.dfs}),ResultPanel({df:df,wizard:this.props.wizard}))));}});module.exports={WizardRoot:WizardRoot,};},{"./DatasetWizardComponents.jsx":4,"./Utils.js":7,"./bootstrap.jsx":9}],7:[function(require,module,exports){"use strict";function isBlank(string){return!/\S/.test(string);}
var Utils={sum:function(values){return _.reduce(values,function(memo,num){return memo+num;},0);},getUrlParam:(function(a){if(a==="")return{};var b={};for(var i=0;i<a.length;++i)
{var p=a[i].split('=');if(p.length!=2)continue;b[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "));}
return b;})(window.location.search.substr(1).split('&')),showAlert:function(message,state,$block){var $alert;$block=typeof $block!=='undefined'?$block:$('div.alert-block');$alert=$('<div class="alert alert-'+state+' fade in"></div>').append('<button class="close" data-dismiss="alert" type="button">×</button>').append(message).alert();$block.prepend($alert);return $alert;},showFadeAlert:function(message,state,ms,$block){var $alert=this.showAlert(message,state,$block);ms=typeof ms!=='undefined'?ms:5000;window.setTimeout(function(){$alert.fadeTo(500,0).slideUp(500,function(){$(this).remove();});},ms);},secondsToStr:function(delta){var hours,minutes,seconds;if(!delta){return'00:00:00';}
delta=delta.toFixed(0);hours=Math.floor(delta/3600);delta%=3600;minutes=Math.floor(delta/60);seconds=delta%60;if(seconds<10){seconds='0'+seconds;}
if(minutes<10){minutes='0'+minutes;}
if(hours<10){hours='0'+hours;}
return hours+':'+minutes+':'+seconds;},isoDateToHumanize:function(date){var dateNew=new Date(date),months=["January","February","March","April","May","June","July","August","September","October","November","December"];return months[dateNew.getMonth()]+' '+dateNew.getDate()+', '+dateNew.getFullYear();},parseErrorResponse:function(xhr){var problem=JSON.parse(xhr.responseText).problem,message;if(typeof problem==='string'){message=problem;}else if('__all__'in problem){message=problem.__all__[0];}else{message=JSON.stringify(problem);}
return message;},objToPaths:function(obj){var ret={},separator='.';for(var key in obj){var val=obj[key];if(val&&(val.constructor===Object||val.constructor===Array)&&!_.isEmpty(val)){var obj2=this.objToPaths(val);for(var key2 in obj2){var val2=obj2[key2];ret[key+separator+key2]=val2;}}else{ret[key]=val;}}
return ret;},startsWith:function(str,sub){return str.slice(0,sub.length)===sub;},uuid:function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);});},BackboneMixin:{componentDidMount:function(){this.getBackboneModels().forEach(function(model){model.on('add change remove',this.forceUpdate.bind(this,null),this);},this);},componentWillUnmount:function(){this.getBackboneModels().forEach(function(model){model.off(null,null,this);},this);}},BackboneEventMixin:{componentDidMount:function(){var eventsModels=this.getBackboneEvents(),model;for(var events in eventsModels){model=eventsModels[events];model.on(events,this.forceUpdate.bind(this,null),this);}},componentWillUnmount:function(){_.values(this.getBackboneEvents()).forEach(function(model){model.off(null,null,this);},this);}},TrainTestDatasetMixin:{getDefaultTrainDatasetId:function(){var id;try{id=this.props.datasets[0][0];}catch(e){}
return id;},getDefaultTestDatasetId:function(){if(this.props.datasets.length<2){return this.getDefaultTrainDatasetId();}
return this.props.datasets[1][0];}},compareMetaData:function(meta,cmeta){if(meta.data_type==='TIMESERIES'){return(meta.binary_input===cmeta.binary_input&&meta.binary_output===cmeta.binary_output&&meta.input_size===cmeta.input_size&&meta.output_size===cmeta.output_size);}else if(meta.data_type=='GENERAL'){return(meta.num_columns===cmeta.num_columns);}else if(meta.data_type=='IMAGES'){return true;}else{console.log("Error");}},ApplyTypesMixin:{applyTypes:function(params){for(var key in this.validation){if(isBlank(params[key])){delete params[key];}
else if(typeof params[key]==="string"){if(this.validation[key].pattern==='digits'){params[key]=parseInt(params[key],10);}else if(this.validation[key].pattern==='number'){params[key]=parseFloat(params[key],10);}}}
return params;}},isBlank:isBlank};module.exports=Utils;},{}],8:[function(require,module,exports){var messages={ensembleSettingsChanged:'Settings have been changed, apply them to take effect.',ensembleSettingsChangedStop:'Settings have been changed, stop training to apply them.',ensembleSettingsErrors:'Settings have errors. Please fix them.',validateMaxGtMin:'Maximum value should be greater than minimum.',valudateMinLtMax:'Minimum value should be lower than maximum.',datafileNeedReparse:'To use this datafile again, please reparse it.',simpleError:'Error. Please refresh your browser and try again.'};var alerts={ensembleSettingsSaved:['Ensemble settings was saved.','success',2000],ensembleResumed:['Ensemble #<%= id %> started.','success',10000],ensembleStopped:['Ensemble #<%= id %> stopped.','warning',10000],ensembleShared:['Ensemble shared.','success'],oneMoreModelAdded:['New model added to the ensemble.','success',10000]};var trigger=function(model,vars){"use strict";var values=_.clone(alerts[this]);values.unshift('alert');values[1]=_.template(values[1])(vars);model.trigger.apply(model,values);};var getXhrErrorParser=function(model){"use strict";return function(xhr){var problem=JSON.parse(xhr.responseText).problem,message;if(typeof problem==='string'){message=problem;}else if('__all__'in problem){message=problem.__all__[0];}else{message=JSON.stringify(problem);}
model.trigger('alert',message,'error');};};module.exports={alerts:alerts,msg:messages,getXhrErrorParser:getXhrErrorParser};for(var key in alerts){if(alerts.hasOwnProperty(key)){if(module.exports.hasOwnProperty(key)){throw"Alert redifinition";}
module.exports[key]=trigger.bind(key);}}},{}],9:[function(require,module,exports){"use strict";var Utils=require('./Utils');var BootstrapAlert=React.createClass({displayName:'BootstrapAlert',render:function(){var type=this.props.type,classes;if(type){classes='alert alert-'+type;}else{classes='alert';}
return(React.DOM.div({className:classes},React.DOM.button({className:"close",onClick:this.props.handleClose,type:"button"},"×"),React.DOM.span({dangerouslySetInnerHTML:{__html:this.props.message}})));}});var Switch=React.createClass({displayName:'Switch',componentDidMount:function(){var value=this.props.value||false,handleChange=this.props.handleChange,rootNode=this.getDOMNode();$(rootNode).bootstrapSwitch();$(rootNode).bootstrapSwitch('setState',value,true);$(rootNode).on('switch-change',function(_,data){handleChange(data.value);});},componentWillUnmount:function(){$(this.getDOMNode()).off('switch-change');},render:function(){return(React.DOM.div({id:"emailSwitch",className:"switch-mini",'data-on':"success",'data-off':"default"},React.DOM.input({type:"checkbox"})));}});var BootstrapInListAlert=React.createClass({displayName:'BootstrapInListAlert',componentDidMount:function(){if(this.props.seconds!==undefined){var timeoutId=setTimeout(this.handleHidden,this.props.seconds);this.setState({timeoutId:timeoutId});}},getInitialState:function(){return{};},handleHidden:function(){if(this.state.timeoutId!==undefined){clearTimeout(this.state.timeoutId);}
$(this.getDOMNode()).hide();this.props.handleHidden(this.props.key);},render:function(){var type=this.props.type,classes;if(type){classes='alert alert-'+type;}else{classes='alert';}
return(React.DOM.div({className:classes},React.DOM.button({className:"close",onClick:this.handleHidden,type:"button"},"×"),React.DOM.span({dangerouslySetInnerHTML:{__html:this.props.message}})));}});var AlertList=React.createClass({displayName:'AlertList',componentDidMount:function(){this.props.models.forEach(function(model){model.on('alert',this.addAlert,this);},this);},componentWillUnmount:function(){this.props.models.forEach(function(model){model.off(null,null,this);},this);},getInitialState:function(){return{alerts:{}};},addAlert:function(message,type,seconds){var alerts=_.clone(this.state.alerts);alerts[Utils.uuid()]={message:message,type:type,seconds:seconds};this.setState({alerts:alerts});},removeAlert:function(key){var alerts=_.clone(this.state.alerts);delete alerts[key];this.setState({alerts:alerts});},render:function(key){var alertsComponent=null,_alert,alerts=this.state.alerts,handleHidden=this.removeAlert;alertsComponent=Object.keys(alerts).map(function(key){_alert=alerts[key];return BootstrapInListAlert({message:_alert.message,seconds:_alert.seconds,type:_alert.type,key:key,handleHidden:handleHidden});}).reverse();return React.DOM.div(null,alertsComponent);}});var BootstrapButton=React.createClass({displayName:'BootstrapButton',render:function(){return this.transferPropsTo(React.DOM.a({role:"button",className:"btn"},this.props.children));}});var BootstrapSelect=React.createClass({displayName:'BootstrapSelect',handleChange:function(event){this.setState({value:event.target.value});},getInitialState:function(){return{value:this.props.value};},render:function(){var options=this.props.values.map(function(val){return(React.DOM.option({key:val[0],value:val[0]},val[1]));});return React.DOM.select({defaultValue:this.state.value,onChange:this.handleChange},options);}});var BootstrapSimpleSelect=React.createClass({displayName:'BootstrapSimpleSelect',render:function(){var options=this.props.values.map(function(val){return(React.DOM.option({key:val[0],value:val[0]},val[1]));});return React.DOM.select({value:this.props.value,onChange:this.props.handleChange},options);}});var BootstrapModal=React.createClass({displayName:'BootstrapModal',componentDidMount:function(){$(this.getDOMNode()).modal({backdrop:'static',keyboard:false,show:false});},componentWillUnmount:function(){$(this.getDOMNode()).off('hidden',this.handleHidden);},close:function(){$(this.getDOMNode()).modal('hide');},open:function(){$(this.getDOMNode()).modal('show');},render:function(){var confirmButton=null;var cancelButton=null;if(this.props.confirm){confirmButton=(BootstrapButton({href:"#",onClick:this.handleConfirm,className:this.props.confirmButtonClass},this.props.confirm));}
if(this.props.cancel){cancelButton=(BootstrapButton({href:"#",onClick:this.handleCancel},this.props.cancel));}
return(React.DOM.div({className:"modal hide fade "+this.props.classes},React.DOM.div({className:"modal-header"},React.DOM.button({type:"button",className:"close",onClick:this.handleCancel,dangerouslySetInnerHTML:{__html:'&times'}}),React.DOM.h3(null,this.props.title)),React.DOM.div({className:"modal-body"},this.props.children),React.DOM.div({className:"modal-footer"},cancelButton,confirmButton)));},handleCancel:function(e){e.preventDefault();if(this.props.onCancel){this.props.onCancel();}},handleConfirm:function(e){e.preventDefault();if(this.props.onConfirm){this.props.onConfirm();}}});var BootstrapSlider=React.createClass({displayName:'BootstrapSlider',getInitialState:function(){return{sliderValue:0};},componentDidMount:function(){var self=this;var slider=this.refs.slider.getDOMNode();$(slider).slider({range:'min',min:this.props.min,max:this.props.max,step:this.props.step,value:this.props.value,create:function(event,ui){if(self.props.handleSlide){self.props.handleSlide(self.props.value);}
if(self.props.value===undefined){self.setState({sliderValue:0});}else{self.setState({sliderValue:self.props.value});}},slide:function(event,ui){if(self.props.handleSlide){self.props.handleSlide(ui.value);}
self.setState({sliderValue:ui.value});}});},render:function(){return(React.DOM.div(null,this.props.percentage?React.DOM.div({className:"slider-value"},this.state.sliderValue,this.props.suffix):'',React.DOM.div({className:"slider",ref:"slider"})));}});module.exports={Modal:BootstrapModal,Button:BootstrapButton,Select:BootstrapSelect,SimpleSelect:BootstrapSimpleSelect,Alert:BootstrapAlert,AlertList:AlertList,Slider:BootstrapSlider,Switch:Switch};},{"./Utils":7}],10:[function(require,module,exports){"use strict";var Filter=require('./filter.js');var BalanceComponent=require('./balanceComponent.jsx');var BalanceFilter=Filter.extend({initialize:function(){this.set('component',BalanceComponent);this.file_format=this.get('wizard').get('dataFile').get('file_format');var wizard=this.get('wizard');this.dsmeta=wizard.get('dataFile').get('meta');this.adjust=[];},name:'balance',dump:function(filters){filters=this.initDumpFilters(filters);this.adjust=[];var distribKeys=Object.keys(this.dsmeta.last_column_info.distrib);var numClasses=distribKeys.length;var equalDistrib=Math.round(100/numClasses);for(var i=0;i<distribKeys.length;i++){this.adjust.push(equalDistrib);}
this.sample=this.sample?this.sample:'uniform';filters.push({name:this.name,adjust:this.adjust,sample:this.sample});return filters;},isApplicable:function(){return(this.file_format==='GENERAL'&&this.dsmeta.last_column_info.distrib!==undefined);},allowedAfterThisFilter:['normalize','shuffle','binarize','split','merge',"column select"],});module.exports=BalanceFilter;},{"./balanceComponent.jsx":11,"./filter.js":17}],11:[function(require,module,exports){"use strict";var Bootstrap=require('../bootstrap.jsx');var Select=Bootstrap.SimpleSelect;var BalanceFilterHead=React.createClass({displayName:'BalanceFilterHead',render:function(){if(this.props.status){var delete_class="delete_filter";var filter_button='filter_button_delete';var div_class='filter_container';}
else{var filter_button=this.props.status;var delete_class='hide_delete';var div_class='';}
if(this.props.select=="disabled")
div_class=div_class+" disabled";if(this.props.status=="update-filter"&&this.props.select=="active"){filter_button=filter_button+" deleted_disabled";delete_class=delete_class+" delete_disabled";}
filter_button=filter_button+" "+this.props.select;return React.DOM.div({ref:"filter_div",className:div_class},React.DOM.a({onClick:this.props.handleClick,className:filter_button,href:"#"},React.DOM.i({className:"icon icon-white icon-tasks"})," Balance",this.props.message?React.DOM.em(null,this.props.message):''),React.DOM.a({href:"#",className:delete_class,onClick:this.props.removeFilter},React.DOM.i({className:"icon icon-white icon-remove"})));}});var BalanceFilterBody=React.createClass({displayName:'BalanceFilterBody',handleChange:function(e){this.props.filter.sample=e.target.value;this.forceUpdate();},render:function(){var dsmeta=this.props.filter.dsmeta;var numClasses=Object.keys(dsmeta.last_column_info.distrib).length;var classRowsList=[];var values=[['uniform','uniform'],['oversampling','oversampling'],['undersampling','undersampling']];var value=this.props.filter.sample||'uniform';for(var k in dsmeta.last_column_info.distrib){classRowsList.push(ClassRow({className:k,bFilter:this.props.filter,numClasses:numClasses}));}
return(React.DOM.div(null,React.DOM.h3(null,"Balance"),React.DOM.p(null,"Select a sampling method to balance the number of sampled elements per class."),React.DOM.div(null,React.DOM.table({className:"table-filters"},React.DOM.tr(null,React.DOM.th({width:"40%"},"Class"),React.DOM.th({width:"20%"},"Real"),React.DOM.th({width:"40%"},"Adjusted")),classRowsList)),React.DOM.div({className:"balance-technique"},React.DOM.strong(null,"Technique:")," ",Select({values:values,handleChange:this.handleChange,value:value}))));}});var ClassRow=React.createClass({displayName:'ClassRow',handleChange:function(){},render:function(){var percent=Math.round(this.props.bFilter.dsmeta.last_column_info.distrib[this.props.className]*100);return(React.DOM.tr(null,React.DOM.td({width:"40%"},this.props.className),React.DOM.td({width:"20%"},percent,"%"),React.DOM.td({width:"40%"},Math.round(1/this.props.numClasses*100),"%")));}});module.exports={head:BalanceFilterHead,body:BalanceFilterBody};},{"../bootstrap.jsx":9}],12:[function(require,module,exports){"use strict";var Chart=React.createClass({displayName:'Chart',render:function(){return(React.DOM.svg({width:this.props.width,height:this.props.height},this.props.children));}});var Bar=React.createClass({displayName:'Bar',getDefaultProps:function(){return{width:0,height:0,offset:0};},tooltipCreate:function(e){var samples=this.props.tooltipData[0]!==undefined?'Samples: '+this.props.tooltipData[0]:'',bins=this.props.tooltipData[1]?'Bin: '+this.props.tooltipData[1]:'';if(this.props.tooltip){$(e.target).tooltip({placement:'bottom',container:'body',title:samples+'<br>'+bins});}},tooltipDestroy:function(e){if(this.props.tooltip){$(e.target).tooltip('destroy');}},render:function(){return(React.DOM.rect({fill:this.props.color,width:this.props.width,height:this.props.height,x:this.props.offset,y:this.props.availableHeight-this.props.height,tooltip:this.props.tooltip,tooltipData:this.props.tooltipData,onMouseEnter:this.tooltipCreate,onMouseLeave:this.tooltipDestroy,'data-html':this.props.tooltip?'true':'','data-toggle':this.props.tooltip?'tooltip':''}));}});var DataSeries=React.createClass({displayName:'DataSeries',getDefaultProps:function(){return{title:'',data:[]};},render:function(){var props=this.props;var colorLen=this.props.colors.length;var yScale=d3.scale.linear().domain([0,d3.max(this.props.data)]).range([0,this.props.height]);var xScale=d3.scale.ordinal().domain(d3.range(this.props.data.length)).rangeRoundBands([0,this.props.width],0.05);var bars=this.props.data.map(function(point,i){var samples=props.tooltipData[0]?props.tooltipData[0][i]:undefined,bins=props.tooltipData[1]?props.tooltipData[1]:undefined,binsInterval=bins?bins[i]+' - '+bins[i+1]:'';return(Bar({height:yScale(point),width:xScale.rangeBand(),offset:xScale(i),availableHeight:props.height,color:props.colors[i%colorLen],key:i,tooltip:props.tooltip,tooltipData:[samples,binsInterval]}));});return(React.DOM.g(null,bars));}});var BarChart=React.createClass({displayName:'BarChart',render:function(){return(Chart({width:this.props.width,height:this.props.height},DataSeries({data:this.props.data,width:this.props.width,height:this.props.height,colors:this.props.colors,tooltip:this.props.tooltip,tooltipData:this.props.tooltipData})));}});module.exports={barchart:BarChart};},{}],13:[function(require,module,exports){"use strict";var Filter=require('./filter.js');var BinarizeComponent=require('./binarizeComponent.jsx');var BinarizeFilter=Filter.extend({initialize:function(){this.set('component',BinarizeComponent);},name:'binarize',allowedAfterThisFilter:['normalize','shuffle','split','balance','merge'],isApplicable:function(){var meta=this.get('wizard').get('dataFile').get('meta');return(meta.data_type==='TIMESERIES'&&!meta.binary_input);}});module.exports=BinarizeFilter;},{"./binarizeComponent.jsx":14,"./filter.js":17}],14:[function(require,module,exports){"use strict";var BinarizeFilterHead=React.createClass({displayName:'BinarizeFilterHead',render:function(){if(this.props.status){var delete_class="delete_filter";var filter_button='filter_button_delete';var div_class='filter_container';}
else{var filter_button=this.props.status;var delete_class='hide_delete';var div_class='';}
if(this.props.select=="disabled")
div_class=div_class+" disabled";if(this.props.status=="update-filter"&&this.props.select=="active"){filter_button=filter_button+" deleted_disabled";delete_class=delete_class+" delete_disabled";}
filter_button=filter_button+" "+this.props.select;return React.DOM.div({ref:"filter_div",className:div_class},React.DOM.a({onClick:this.props.handleClick,className:filter_button,href:"#"},React.DOM.i({className:"icon icon-white icon-random"})," To Binary Format",this.props.message?React.DOM.em(null,this.props.message):''),React.DOM.a({href:"#",className:delete_class,onClick:this.props.removeFilter},React.DOM.i({className:"icon icon-white icon-remove"})));}});var BinarizeFilterBody=React.createClass({displayName:'BinarizeFilterBody',render:function(){return(React.DOM.div(null,React.DOM.h3(null,"Convert to binary format")));}});module.exports={head:BinarizeFilterHead,body:BinarizeFilterBody};},{}],15:[function(require,module,exports){"use strict";var Filter=require('./filter.js');var ColumnSelectComponent=require('./columnSelectComponent.jsx');var ColumnSelectFilter=Filter.extend({initialize:function(){this.set('component',ColumnSelectComponent);this.file_format=this.get('wizard').get('dataFile').get('file_format');var wizard=this.get('wizard');this.dsmeta=wizard.get('dataFile').get('meta');this.values=this.dsmeta.dtypes;this.outputs=[];this.type='';},name:'column select',dump:function(filters){filters=this.initDumpFilters(filters);var keys=Object.keys(this.values);var ignores=[];var permutes=[];for(var i=0;i<keys.length;i++){switch(this.values[keys[i]]){case'i':permutes.push(keys[i]);break;case'-':ignores.push(keys[i]);break;}}
filters.push({name:'ignore',columns:ignores.sort()});filters.push({name:'permute',columns:permutes.sort()});filters.push({name:'outputs',columns:this.outputs.map(function(object){return object.index})});return filters;},allowedAfterThisFilter:['normalize','shuffle','binarize','split','balance','merge'],isApplicable:function(){return(this.file_format==='GENERAL'&&this.dsmeta.uniques_per_col!==undefined);},});module.exports=ColumnSelectFilter;},{"./columnSelectComponent.jsx":16,"./filter.js":17}],16:[function(require,module,exports){"use strict";var Bootstrap=require('../bootstrap.jsx');var BarChartComponent=require('./barChartComponent.jsx');var Select=Bootstrap.SimpleSelect;var BarChart=BarChartComponent.barchart,BootstrapAlert=Bootstrap.AlertList;var ColumnSelectFilterHead=React.createClass({displayName:'ColumnSelectFilterHead',render:function(){if(this.props.status){var delete_class="delete_filter";var filter_button='filter_button_delete';var div_class='filter_container';}
else{var filter_button=this.props.status;var delete_class='hide_delete';var div_class='';}
if(this.props.select=="disabled")
div_class=div_class+" disabled";if(this.props.status=="update-filter"&&this.props.select=="active"){filter_button=filter_button+" deleted_disabled";delete_class=delete_class+" delete_disabled";}
filter_button=filter_button+" "+this.props.select;return React.DOM.div({ref:"filter_div",className:div_class},React.DOM.a({onClick:this.props.handleClick,className:filter_button,href:"#"},React.DOM.i({className:"icon icon-white icon-indent-right"})," Select Columns",this.props.message?React.DOM.em(null,this.props.message):''),React.DOM.a({href:"#",className:delete_class,onClick:this.props.removeFilter},React.DOM.i({className:"icon icon-white icon-remove"})));}});var ColumnSelectFilterBody=React.createClass({displayName:'ColumnSelectFilterBody',getInitialState:function(e){var decoupled=this.props.filter.dsmeta.dtypes.map(function(x){return x;});return{values:decoupled,currentPage:1,pageSize:15};},componentWillReceiveProps:function(nextProps){this.setState({currentPage:1});},handleChange:function(colNum,value){var cancel=this.props.status.refs.outputColumns.handleColumnChange(colNum,value);if(cancel==false){var tempValues=this.state.values;tempValues[colNum]=value;this.setState({values:tempValues});this.props.filter.values=tempValues;}
return cancel;},getPage:function(){var start=this.state.pageSize*(this.state.currentPage-1),end=start+this.state.pageSize;return{currentPage:this.state.currentPage,rows:this.props.filter.dsmeta.uniques_per_col.slice(start,end),numPages:this.getNumPages(),handleClick:function(pageNum){return function(){this.handlePageChange(pageNum);}.bind(this);}.bind(this)};},getNumPages:function(){var rowsLength=this.props.filter.dsmeta.uniques_per_col.length;var numPages=Math.floor(rowsLength/this.state.pageSize);if(rowsLength%this.state.pageSize>0){numPages++;}
return numPages;},handlePageChange:function(pageNum){this.setState({currentPage:pageNum});},render:function(){var page=this.getPage();var self=this;var selectionRowsList=page.rows.map(function(colUniq,i){return SelectionRow({key:i,colNum:i,numUniques:colUniq,filterValues:this.props.filter.values,dsmeta:this.props.filter.dsmeta,handleChange:this.handleChange.bind(this,i+self.state.pageSize*(self.state.currentPage-1)),pageSize:self.state.pageSize,currentPage:self.state.currentPage});},this);var pagination=(this.props.filter.dsmeta.uniques_per_col.length<=this.state.pageSize)?null:Pagination({page:page});return(React.DOM.div({className:"span8"},React.DOM.h3(null,"Select Columns"),React.DOM.p(null,"Specify the type of each column in your data and mark any columns that you'd"+' '+"like to ignore. In the majority of cases, the intelligent defaults are intelligent."),React.DOM.table({className:"table-filters"},React.DOM.thead(null,React.DOM.tr(null,React.DOM.th(null,"Column"),React.DOM.th(null,"Unique Values"),React.DOM.th(null,"Category"),React.DOM.th(null,"Histogram"))),React.DOM.tbody(null,selectionRowsList)),pagination));}});var SelectionRow=React.createClass({displayName:'SelectionRow',getInitialState:function(){var i=this.props.colNum;return{value:this.props.dsmeta.dtypes[i]};},dragStart:function(name,e){var page_size=this.props.pageSize;var current_page=this.props.currentPage;var index=page_size*(current_page-1)+this.props.colNum;var data={name:name,type:this.state.value,index:index,};e.dataTransfer.setData("text",JSON.stringify(data));},handleChange:function(e){var cancel=this.props.handleChange(e.target.value);if(cancel==false)
this.setState({value:e.target.value});},render:function(){var i=this.props.colNum;var displayVals={'f':'numerical','i':'categorical','S':'text','-':'ignore'};var key=null,values=null,histogramData,binsData,value=null,columnName=null;if(this.props.currentPage>1){i+=(this.props.currentPage-1)*this.props.pageSize;}
key=this.props.dsmeta.dtypes[i];columnName=this.props.dsmeta.names[i];binsData=this.props.dsmeta.bins?this.props.dsmeta.bins[i]:undefined;histogramData=this.props.dsmeta.histogram[i];value=this.props.filterValues[i]||'f';var tooltipData=[histogramData,binsData];values=[[key,displayVals[key]]];if(!this.props.dsmeta.locked[i]){if(key=='i')
values=values.concat([['f',displayVals.f]]);}
values=values.concat([['-',displayVals['-']]]);return(React.DOM.tr({draggable:"true",onDragStart:this.dragStart.bind(this,columnName)},React.DOM.td(null,columnName),React.DOM.td(null,React.DOM.strong(null,this.props.numUniques)),React.DOM.td(null,Select({values:values,handleChange:this.handleChange,value:value})),React.DOM.td(null,BarChart({width:120,height:30,data:histogramData,colors:["#1f77b4","#038d03","#9a3334"],tooltip:true,tooltipData:tooltipData}))));}});var Pagination=React.createClass({displayName:'Pagination',render:function(){var page=this.props.page,start=null,end=null,prev=null,next=null,info=null;if(page.currentPage>1){if(page.currentPage>2){start=(React.DOM.span({className:"pagination-link",key:"start",onClick:page.handleClick(1)},"«"));}
prev=(React.DOM.span({className:"pagination-link",key:"prev",onClick:page.handleClick(page.currentPage-1)},"‹"));}
info=(React.DOM.span({className:"pagination-current"},"Page ",React.DOM.strong(null,page.currentPage)," of ",React.DOM.strong(null,page.numPages)));if(page.currentPage<page.numPages){next=(React.DOM.span({className:"pagination-link",key:"next",onClick:page.handleClick(page.currentPage+1)},"›"));if(page.currentPage<page.numPages-1){end=(React.DOM.span({className:"pagination-link",key:"end",onClick:page.handleClick(page.numPages)},"»"));}}
return(React.DOM.div({className:"pagination"},start," ",prev," ",info," ",next," ",end));}});var TrOutput=React.createClass({displayName:'TrOutput',removeColumn:function(e){this.props.removeColumn(this.props.order);},dragOver:function(e){e.preventDefault();},render:function(){return(React.DOM.tr({'data-id':this.props.order,draggable:"true",onDragStart:this.props.dragStart,onDragEnd:this.props.dragEnd,onDragOver:this.props.dragOver,onDrop:this.props.drop},React.DOM.td(null,this.props.text),React.DOM.td(null,React.DOM.button({className:"btn btn-mini btn-danger",onClick:this.removeColumn},"remove"))));},})
var OutputColumns=React.createClass({displayName:'OutputColumns',getInitialState:function(){var type='';if(this.props.filter.outputs.length>0)
type=this.props.filter.type;return{columns:this.props.filter.outputs,type:type,change:[],};},removeColumn:function(column){var columns=this.state.columns;var type=this.state.type;columns.splice(column,1);if(columns.length==0){type='';this.props.wizard.outputs=false;this.props.filter.type='';}
this.props.filter.outputs=columns;this.setState({columns:columns,type:type});},preventDefault:function(event){event.preventDefault();},drop:function(e){e.preventDefault();try{var data=JSON.parse(event.dataTransfer.getData('text'));}catch(e){return;}
var data_type={f:'regression',i:'categorical',S:'categorical'};data_type=data_type[data.type];var type=this.state.type;if(type=='')
type=data_type;else if(type!=data_type){if(data.type=='-')
this.refs.alert.addAlert("You can't add an ignored column!",'error',8000);else
this.refs.alert.addAlert("You can't add an different types of columns!",'error',8000);return;}
var new_output=this.state.columns.concat({name:data.name,index:data.index});var repeated=false;this.state.columns.map(function(object,i){if(object.index==data.index)
repeated=true;});if(repeated)
return false;this.props.filter.outputs=new_output;this.props.filter.type=type;this.setState({columns:new_output,type:type});},dragStart:function(id,e){this.dragged=id;e.dataTransfer.effectAllowed='move';e.dataTransfer.setData("text/html",e.currentTarget);},dragEnd:function(e){var dragged=this.dragged;var over=this.over.dataset.id;var columns=this.state.columns;columns.map(function(object,i){if(object.name==dragged)
dragged=i;else if(i==parseInt(over))
over=i;});columns.move(dragged,over);this.props.filter.outputs=columns;this.setState({columns:columns});},dragOver:function(e){this.over=e.currentTarget;},handleColumnChange:function(column,value){var self=this;var cancel=false;var data_type={f:'regression',i:'categorical',S:'categorical'};var columns=this.state.columns;;this.state.columns.map(function(object,i){if(object.index==column){if(value=='-'){self.refs.alert.addAlert("You can't ignore a selected column, please remove the column first.",'error',8000);cancel=true;}
else if(self.state.type!=data_type[value]){self.refs.alert.addAlert("You can't change to this type of column, previous columns have a different type.",'error',8000);cancel=true;}}});return(cancel);},render:function(){var columns=this.state.columns;var self=this;if(this.state.columns.length>0)
this.props.wizard.outputs=true;return(React.DOM.div({className:"output"},BootstrapAlert({ref:"alert",models:[]}),React.DOM.p(null,"Drag the columns from the table and drop it here to select them as output columns."),React.DOM.p(null,"You can reorder by draging the rows."),React.DOM.table({className:"table-filters outputs"},React.DOM.thead(null,React.DOM.tr(null,React.DOM.th({colSpan:"2"},"Column"))),React.DOM.tbody(null,columns.map(function(data,i){return TrOutput({text:data.name,key:data.index,order:i,removeColumn:self.removeColumn,drop:self.drop,dragStart:self.dragStart.bind(self,data.name),dragEnd:self.dragEnd,dragOver:self.dragOver});})))))},});module.exports={head:ColumnSelectFilterHead,body:ColumnSelectFilterBody,outputColumns:OutputColumns,};},{"../bootstrap.jsx":9,"./barChartComponent.jsx":12}],17:[function(require,module,exports){"use strict";var Filter=Backbone.Model.extend({dump:function(filters){filters=this.initDumpFilters(filters);filters.push({name:this.name});return filters;},initDumpFilters:function(filters){if(filters===undefined||filters.length===0){filters=[];}
return filters;},getHeadComponent:function(){var Component=this.get('component').head;return Component({handleClick:this.onSelect.bind(this),key:this.name});},getAppliedComponent:function(state){var Component=this.get('component').head;var filterState=this.get('wizard').get('state'),status='',message='';switch(state){case'update':status='active';break;case'dismiss':status='warning disabled';message='Will be dropped on update';break;case'applied':status='disabled';break;default:break;}
return Component({handleClick:this.onAppliedSelect.bind(this),key:this.name,status:filterState,select:status,message:message,removeFilter:this.deleteFilter.bind(this)});},onSelect:function(e){e.preventDefault();this.get('wizard').selectFilter(this);},onAppliedSelect:function(e){e.preventDefault();this.get('wizard').selectFilterForUpdate(this);},getBodyComponent:function(status){var Component=this.get('component').body;return Component({key:this.name,filter:this,status:status});},isApplicable:function(){return true;},deleteFilter:function(e){e.preventDefault();this.get('wizard').resetFilter(this);},});module.exports=Filter;},{}],18:[function(require,module,exports){"use strict";var Utils=require('../Utils.js');var Filter=require('./filter.js');var MergeComponent=require('./mergeComponent.jsx');var MergeFilter=Filter.extend({initialize:function(){var wizard=this.get('wizard'),df=wizard.get('dataFile'),file_format=df.get('file_format'),dfs=wizard.dfs,self=this;this.file_format=file_format;this.set('component',MergeComponent);var values=dfs.where({file_format:file_format}).filter(function(val){if(val.get('id')===df.get('id')){return false;}
return Utils.compareMetaData(df.get('meta'),val.get('meta'));}).map(function(val){return[val.get('id'),val.get('name')];});if(values.length>0){this.set({values:values,value:values[0][0]});}else{this.unset('values');this.unset('value');}},dump:function(filters){filters=this.initDumpFilters(filters);filters.push({name:this.name,datas:[parseInt(this.get('value'),10)]});return filters;},isApplicable:function(){return(this.get('values')!==undefined&&this.file_format==='GENERAL');},name:'merge',allowedAfterThisFilter:['normalize','shuffle','binarize','split','balance'],});module.exports=MergeFilter;},{"../Utils.js":7,"./filter.js":17,"./mergeComponent.jsx":19}],19:[function(require,module,exports){"use strict";var Bootstrap=require('../bootstrap.jsx');var Select=Bootstrap.SimpleSelect;var Utils=require('../Utils.js');var MergeFilterHead=React.createClass({displayName:'MergeFilterHead',render:function(){if(this.props.status){var delete_class="delete_filter";var filter_button='filter_button_delete';var div_class='filter_container';}
else{var filter_button=this.props.status;var delete_class='hide_delete';var div_class='';}
if(this.props.select=="disabled")
div_class=div_class+" disabled";if(this.props.status=="update-filter"&&this.props.select=="active"){filter_button=filter_button+" deleted_disabled";delete_class=delete_class+" delete_disabled";}
filter_button=filter_button+" "+this.props.select;return React.DOM.div({ref:"filter_div",className:div_class},React.DOM.a({onClick:this.props.handleClick,className:filter_button,href:"#"},React.DOM.i({className:"icon icon-white icon-resize-small"})," Merge",this.props.message?React.DOM.em(null,this.props.message):''),React.DOM.a({href:"#",className:delete_class,onClick:this.props.removeFilter},React.DOM.i({className:"icon icon-white icon-remove"})));}});var MergeFilterBody=React.createClass({displayName:'MergeFilterBody',mixins:[Utils.BackboneMixin],getBackboneModels:function(){return[this.props.filter];},handleChange:function(e){this.props.filter.set('value',e.target.value);},render:function(){var values=this.props.filter.get('values');return(React.DOM.div(null,React.DOM.h3(null,"Merge"),Select({values:values,value:this.props.filter.get('value'),handleChange:this.handleChange})));}});module.exports={head:MergeFilterHead,body:MergeFilterBody};},{"../Utils.js":7,"../bootstrap.jsx":9}],20:[function(require,module,exports){"use strict";var Filter=require('./filter.js');var NormalizeComponent=require('./normalizeComponent.jsx');var NormalizeFilter=Filter.extend({initialize:function(){this.set('component',NormalizeComponent);},name:'normalize',allowedAfterThisFilter:['shuffle','binarize','split','balance','merge',"column select"],isApplicable:function(){var meta=this.get('wizard').get('dataFile').get('meta');if(meta.data_type==='GENERAL'){return true;}
return false;},});module.exports=NormalizeFilter;},{"./filter.js":17,"./normalizeComponent.jsx":21}],21:[function(require,module,exports){"use strict";var NormalizeFilterHead=React.createClass({displayName:'NormalizeFilterHead',render:function(){if(this.props.status){var delete_class="delete_filter";var filter_button='filter_button_delete';var div_class='filter_container';}
else{var filter_button=this.props.status;var delete_class='hide_delete';var div_class='';}
if(this.props.select=="disabled")
div_class=div_class+" disabled";if(this.props.status=="update-filter"&&this.props.select=="active"){filter_button=filter_button+" deleted_disabled";delete_class=delete_class+" delete_disabled";}
filter_button=filter_button+" "+this.props.select;return React.DOM.div({ref:"filter_div",className:div_class},React.DOM.a({onClick:this.props.handleClick,className:filter_button,href:"#"},React.DOM.i({className:"icon icon-white icon-signal"})," Normalize",this.props.message?React.DOM.em(null,this.props.message):''),React.DOM.a({href:"#",className:delete_class,onClick:this.props.removeFilter},React.DOM.i({className:"icon icon-white icon-remove"})));}});var NormalizeFilterBody=React.createClass({displayName:'NormalizeFilterBody',render:function(){return(React.DOM.div(null,React.DOM.h3(null,"Normalize"),React.DOM.p(null,"When Ersatz \"normalizes\" your data, it is scaling it to a 0-1 range. For instance, if you have a column with values of 0-255, this routine will scale those values back down to a 0-1 range. It does this for each column in your dataset.")));}});module.exports={head:NormalizeFilterHead,body:NormalizeFilterBody};},{}],22:[function(require,module,exports){"use strict";var Filter=require('./filter.js');var ShuffleComponent=require('./shuffleComponent.jsx');var ShuffleFilter=Filter.extend({initialize:function(){this.set('component',ShuffleComponent);this.file_format=this.get('wizard').get('dataFile').get('file_format');},isApplicable:function(){return(this.file_format==='GENERAL');},name:'shuffle',allowedAfterThisFilter:['normalize','binarize','split','balance','merge',"column select"],});module.exports=ShuffleFilter;},{"./filter.js":17,"./shuffleComponent.jsx":23}],23:[function(require,module,exports){"use strict";var ShuffleFilterHead=React.createClass({displayName:'ShuffleFilterHead',render:function(){if(this.props.status){var delete_class="delete_filter";var filter_button='filter_button_delete';var div_class='filter_container';}
else{var filter_button=this.props.status;var delete_class='hide_delete';var div_class='';}
if(this.props.select=="disabled")
div_class=div_class+" disabled";if(this.props.status=="update-filter"&&this.props.select=="active"){filter_button=filter_button+" deleted_disabled";delete_class=delete_class+" delete_disabled";}
filter_button=filter_button+" "+this.props.select;return React.DOM.div({ref:"filter_div",className:div_class},React.DOM.a({onClick:this.props.handleClick,className:filter_button,href:"#"},React.DOM.i({className:"icon icon-white icon-random"})," Shuffle",this.props.message?React.DOM.em(null,this.props.message):''),React.DOM.a({href:"#",className:delete_class,onClick:this.props.removeFilter},React.DOM.i({className:"icon icon-white icon-remove"})));}});var ShuffleFilterBody=React.createClass({displayName:'ShuffleFilterBody',render:function(){return(React.DOM.div(null,React.DOM.h3(null,"Shuffle"),React.DOM.p(null,"This routine simply shuffles your dataset.",React.DOM.br(null),"This might be helpful if you'd like to get a new independent split for training/testing purposes.")));}});module.exports={head:ShuffleFilterHead,body:ShuffleFilterBody};},{}],24:[function(require,module,exports){"use strict";var Filter=require('./filter.js');var Utils=require('../Utils.js');var SplitComponent=require('./splitComponent.jsx');var SplitFilter=Filter.extend({initialize:function(){var wizard=this.get('wizard'),name=wizard.get('dataFile').get('name').split('.')[0];this.set('component',SplitComponent);if(wizard.get('dataFile').get('file_format')==='IMAGES'){this.set('totalSamples',Utils.sum(_.values(wizard.get('dataFile').get('meta').classes)));}else{this.set('totalSamples',wizard.get('dataFile').get('meta').data_rows);}
this.set('filenameFirst',name+'_train');this.set('filenameSecond',name+'_test');this.set('value',70);},dump:function(filters){var self=this,wizard=this.get('wizard'),filters1=this.initDumpFilters(filters),filters2=filters1.slice();filters1.push({name:this.name,start:0,end:self.get('value')});filters2.push({name:this.name,start:self.get('value'),end:100});return[{name:this.get('filenameFirst'),filters:filters1,data:wizard.get('dataFile').id},{name:this.get('filenameSecond'),filters:filters2,data:wizard.get('dataFile').id}];},getSamples:function(){return this.get('value')*this.get('totalSamples')/100;},validate:function(){var valid=(this.get('filenameFirst')&&this.get('filenameSecond'));this.get('wizard').set('filterInvalid',!valid);},name:'split',allowedAfterThisFilter:['normalize','shuffle','binarize','balance','merge',"column select"],});module.exports=SplitFilter;},{"../Utils.js":7,"./filter.js":17,"./splitComponent.jsx":25}],25:[function(require,module,exports){"use strict";var Bootstrap=require('./../bootstrap.jsx');var BootstrapSlider=Bootstrap.Slider;var Utils=require('./../Utils.js');var SplitFilterHead=React.createClass({displayName:'SplitFilterHead',render:function(){if(this.props.status){var delete_class="delete_filter";var filter_button='filter_button_delete';var div_class='filter_container';}
else{var filter_button=this.props.status;var delete_class='hide_delete';var div_class='';}
if(this.props.select=="disabled")
div_class=div_class+" disabled";if(this.props.status=="update-filter"&&this.props.select=="active"){filter_button=filter_button+" deleted_disabled";delete_class=delete_class+" delete_disabled";}
filter_button=filter_button+" "+this.props.select;return React.DOM.div({ref:"filter_div",className:div_class},React.DOM.a({onClick:this.props.handleClick,className:filter_button,href:"#"},React.DOM.i({className:"icon icon-white icon-resize-full"})," Split",this.props.message?React.DOM.em(null,this.props.message):''),React.DOM.a({href:"#",className:delete_class,onClick:this.props.removeFilter},React.DOM.i({className:"icon icon-white icon-remove"})));}});var SplitFilterBody=React.createClass({displayName:'SplitFilterBody',mixins:[Utils.BackboneMixin],getBackboneModels:function(){return[this.props.filter];},onSlide:function(value){this.props.filter.set('value',value);},onChangeFilenameTrain:function(e){this.props.filter.set('filenameFirst',e.target.value);this.props.filter.validate();},onChangeFilenameTest:function(e){this.props.filter.set('filenameSecond',e.target.value);this.props.filter.validate();},render:function(){var filter=this.props.filter;return(React.DOM.div({className:"split-filter"},React.DOM.h3(null,"Split"),React.DOM.em({className:"note-italic"},"Use slider to choose range for data split"),BootstrapSlider({min:1,max:99,step:1,value:filter.get('value'),handleSlide:this.onSlide}),React.DOM.div({className:"data-split clearfix"},React.DOM.div({className:"dataset_column"},React.DOM.h4(null,"Dataset 1"),React.DOM.div({className:"data-split-info"},React.DOM.span({className:"data-split-percentage"},filter.get('value')+"%"),React.DOM.span({className:"data-split-samples"},Humanize.intComma(filter.getSamples())," samples")),React.DOM.div({className:"dataset-name"},React.DOM.label(null,React.DOM.i({className:"icon icon-white icon-file"})," Set dataset name"),React.DOM.input({type:"text",onChange:this.onChangeFilenameTrain,value:filter.get('filenameFirst'),className:"input-dark"}))),React.DOM.div({className:"dataset_column"},React.DOM.h4(null,"Dataset 2"),React.DOM.div({className:"data-split-info"},React.DOM.span({className:"data-split-percentage"},100-filter.get('value')+"%"),React.DOM.span({className:"data-split-samples"},Humanize.intComma(filter.get('totalSamples')-filter.getSamples())," samples")),React.DOM.div({className:"dataset-name"},React.DOM.label(null,React.DOM.i({className:"icon icon-white icon-file"})," Set dataset name"),React.DOM.input({type:"text",onChange:this.onChangeFilenameTest,value:filter.get('filenameSecond'),className:"input-dark"}))))));}});module.exports={head:SplitFilterHead,body:SplitFilterBody};},{"./../Utils.js":7,"./../bootstrap.jsx":9}],26:[function(require,module,exports){"use strict";var Utils=require('../Utils.js'),Bootstrap=require('../bootstrap.jsx'),BootstrapSlider=Bootstrap.Slider;var ParamSlider=React.createClass({displayName:'ParamSlider',onSlide:function(value){this.props.model.set(this.props.key,value);},render:function(){var name=this.props.key;return(React.DOM.tr(null,React.DOM.td(null,React.DOM.strong(null,this.props.label),React.DOM.br(null),React.DOM.span({dangerouslySetInnerHTML:{__html:this.props.help}})),React.DOM.td(null,BootstrapSlider({percentage:"true",suffix:"%",min:this.props.min,max:this.props.max,step:this.props.step,value:this.props.model.get(name),handleSlide:this.onSlide}))));}});var ParamSwitch=React.createClass({displayName:'ParamSwitch',componentDidMount:function(){var rootNode=$(this.getDOMNode()).find('.param-switch');rootNode.bootstrapSwitch();rootNode.bootstrapSwitch('setState',this.props.model.get(this.props.key),true);rootNode.on('switch-change',$.proxy(function(_,data){this.props.model.set(this.props.key,data.value);},this));},componentWillUnmount:function(){$(this.getDOMNode()).find('.param-switch').off('switch-change');},render:function(){return(React.DOM.tr(null,React.DOM.td(null,React.DOM.strong(null,this.props.label),React.DOM.br(null),React.DOM.span({dangerouslySetInnerHTML:{__html:this.props.help}})),React.DOM.td(null,React.DOM.div({className:"switch-mini param-switch",'data-on':"success",'data-off':"default"},React.DOM.input({type:"checkbox"})))));}});var ParamCheckbox=React.createClass({displayName:'ParamCheckbox',handleChange:function(e){this.props.model.set(this.props.key,e.target.checked);},render:function(){var name=this.props.key,error=this.props.errors[name];return(React.DOM.tr(null,React.DOM.td(null,React.DOM.strong(null,this.props.label),React.DOM.br(null),React.DOM.span({dangerouslySetInnerHTML:{__html:this.props.help}})),React.DOM.td(null,React.DOM.input({type:"checkbox",className:"input-mini",checked:this.props.model.get(name),onChange:this.handleChange}),(error)?React.DOM.div({className:"settings-error"},error):'')));}});var ParamInput=React.createClass({displayName:'ParamInput',handleChange:function(e){if(Utils.isBlank(e.target.value)){this.props.model.set(this.props.key,'');}else{this.props.model.set(this.props.key,e.target.value);}},render:function(){var name=this.props.key,error=this.props.errors[name],labels=this.props.model.labels;return(React.DOM.tr(null,React.DOM.td(null,React.DOM.strong(null,(this.props.label)?this.props.label:labels[name]),React.DOM.br(null),React.DOM.span({dangerouslySetInnerHTML:{__html:this.props.help}})," "),React.DOM.td(null,React.DOM.input({type:"text",className:"input-dark input-mini",value:this.props.model.get(name),onChange:this.handleChange,placeholder:this.props.placeholder}),(error)?React.DOM.div({className:"settings-error"},error):'')));}});var AutoencoderComponent=React.createClass({displayName:'AutoencoderComponent',mixins:[Utils.BackboneMixin],getBackboneModels:function(){return[this.props.model];},render:function(){var model=this.props.model,errors=this.props.model.validate()||{};return(React.DOM.div(null,React.DOM.h4({className:"select-item text-center"},"Model params "),React.DOM.div(null,React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"maxnum_iter",label:"number of iterations",model:model,errors:errors}),ParamInput({key:"batch_size",label:"size of batches",model:model,errors:errors}),ParamInput({key:"hidden_outputs",label:"size of hidden layer",model:model,errors:errors,placeholder:20}),ParamInput({key:"noise_level",label:"noise level",model:model,errors:errors,placeholder:0.2}),ParamInput({key:"learning_rate_init",label:"learning rate",model:model,errors:errors,placeholder:0.001}),ParamInput({key:"irange",label:"Range of uniform initialization",model:model,errors:errors,placeholder:0.05}))))));}});var MRNNComponent=React.createClass({displayName:'MRNNComponent',mixins:[Utils.BackboneMixin],getBackboneModels:function(){return[this.props.model];},render:function(){var model=this.props.model,errors=this.props.model.validate()||{};return(React.DOM.div(null,React.DOM.h4({className:"select-item text-center"},"Model params "),React.DOM.div(null,React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"maxnum_iter",label:"number of iterations",model:model,errors:errors,placeholder:20}),ParamInput({key:"h",label:"number of hidden units",model:model,errors:errors,placeholder:2}),ParamInput({key:"f",label:"number of factored units",model:model,errors:errors,placeholder:2}),ParamInput({key:"cg_min_cg",label:"minimum number of conjugate gradient iterations",model:model,errors:errors,placeholder:1}),ParamInput({key:"cg_max_cg",label:"maximum number of conjugate gradient iterations",model:model,errors:errors,placeholder:40}),ParamInput({key:"lambda",label:"damping parameter lambda",model:model,errors:errors,placeholder:0.01}),ParamInput({key:"mu",label:"damping parameter mu",model:model,errors:errors,placeholder:0.001}))))));}});var CONVComponent=React.createClass({displayName:'CONVComponent',mixins:[Utils.BackboneMixin],getBackboneModels:function(){return[this.props.model];},render:function(){var model=this.props.model,errors=this.props.model.validate()||{};return(React.DOM.div(null,React.DOM.h4({className:"select-item text-center"},"Model params "),React.DOM.div(null,React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"maxnum_iter",label:"number of iterations",model:model,errors:errors}),ParamInput({key:"img_size",label:"image size",help:"must be a multiple of 8",model:model,errors:errors}),ParamInput({key:"dropout",label:"dropout",model:model,errors:errors,placeholder:0.5}),ParamInput({key:"learning_rate_init",label:"learning rate",model:model,errors:errors,placeholder:0.001}),ParamInput({key:"momentum_init",label:"momentum",model:model,errors:errors,placeholder:0.5}),ParamCheckbox({key:"random_sparse",label:"Use random sparse layers",model:model,errors:errors}))))));}});module.exports={input:ParamInput,checkbox:ParamCheckbox,slider:ParamSlider,switch:ParamSwitch,Autoencoder:AutoencoderComponent,MRNN:MRNNComponent,CONV:CONVComponent};},{"../Utils.js":7,"../bootstrap.jsx":9}],27:[function(require,module,exports){"use strict";var ParamsComponents=require('./Components.jsx'),AutoencoderComponent=ParamsComponents.Autoencoder,CONVComponent=ParamsComponents.CONV,MRNNComponent=ParamsComponents.MRNN,MLPModels=require('./mlpModels.js'),Utils=require('../Utils.js'),ConvModel=require('./convModel.js');_.extend(Backbone.Model.prototype,Backbone.Validation.mixin,Utils.ApplyTypesMixin);Backbone.Validation.configure({labelFormatter:'label'});var BaseModel=Backbone.Model.extend({getBackboneModels:function(){return[this];},populate:function(params){this.set(params);},dumpParams:function(){return this.applyTypes(this.attributes);},isParamsValid:function(){return this.isValid(true);}});var AutoencoderModel=BaseModel.extend({getComponent:function(){return AutoencoderComponent({model:this});},labels:{maxnum_iter:"number of iterations",batch_size:"size of batches",hidden_outputs:"size of hidden layer",noise_level:"noise level",learning_rate_init:"learning rate",irange:"range of uniform initialization"},dumpParams:function(){var params=_.clone(this.attributes);params=this.applyTypes(params);params.learning_rate={init:params.learning_rate_init};delete params.learning_rate_init;return params;},populate:function(params){params=_.clone(params);try{params.learning_rate_init=params.learning_rate.init;delete params.learning_rate;}catch(e){}
this.set(params);},validation:{'batch_size':{required:true,pattern:'digits',range:[1,10000]},'maxnum_iter':{required:true,pattern:'digits',range:[1,1000]},'hidden_outputs':{required:false,pattern:'digits',range:[1,1000]},'noise_level':{required:false,pattern:'number',range:[1e-10,1]},'learning_rate_init':{required:false,pattern:'number',range:[1e-10,1]},'irange':{required:false,pattern:'number',range:[1e-10,1]}}});var MRNNModel=BaseModel.extend({getComponent:function(){return MRNNComponent({model:this});},labels:{maxnum_iter:"number of iterations",h:"number of hidden units",f:"number of factored units",cg_min_cg:"minimum number of conjugate gradient iterations",cg_max_cg:"maximum number of conjugate gradient iterations",lambda:"damping parameter lambda",mu:"damping parameter mu"},validation:{'maxnum_iter':{required:true,pattern:'digits',range:[1,1000]},'h':{required:false,pattern:'digits',range:[1,1000]},'f':{required:false,pattern:'digits',range:[1,1000]},'cg_min_cg':{required:false,pattern:'digits',range:[1,1000],fn:'ltMaxCg'},'cg_max_cg':{required:false,pattern:'digits',range:[1,1000],fn:'gtMinCg'},'lambda':{required:false,pattern:'number',range:[1e-6,1]},'mu':{required:false,pattern:'number',range:[1e-6,1]}},gtMinCg:function(cgMaxCg,attr,state){if(state.cg_min_cg!==undefined&&cgMaxCg!==undefined&&parseFloat(state.cg_min_cg)>parseFloat(cgMaxCg)){return"maximum # of CG iterations should be greater than minimum";}},ltMaxCg:function(cgMinCg,attr,state){if(state.cg_min_cg!==undefined&&cgMinCg!==undefined&&parseFloat(state.cg_max_cg)<parseFloat(cgMinCg)){return"minimum # of CG iterations should be lower than maximum";}}});var defaultModelParams={AUTOENCODER:{batch_size:128,maxnum_iter:100},CONV:{maxnum_iter:100,img_size:32,random_sparse:false,dropout:0.5,learning_rate_init:0.01,momentum_init:0.9,layers:[{type:'convSet',convChannels:3,convFilters:32,convPadding:2,convStride:1,convFilterSize:5,convSharedBiases:1,convDropout:0.5,poolStart:0,poolSizeX:3,poolStride:2,poolOutputsX:0,normSize:3},{type:'convSet',convChannels:32,convFilters:32,convPadding:2,convStride:1,convFilterSize:5,convSharedBiases:1,convDropout:0.5,poolStart:0,poolSizeX:3,poolStride:2,poolOutputsX:0,normSize:3},{type:'convSet',convChannels:32,convFilters:32,convPadding:2,convStride:1,convFilterSize:5,convSharedBiases:1,convDropout:0.5,poolStart:0,poolSizeX:3,poolStride:2,poolOutputsX:0,normSize:10},{type:'fc',outputs:3}]},MRNN:{maxnum_iter:20},MLP_RECTIFIED:{batch_size:128,maxnum_iter:100,percent_batches_per_iter:100,dropout:true,layers:[{type:'rectified_linear',dim:200,sparse_init:10,irange:0.005,switch_uniform_init:false},{type:'rectified_linear',dim:200,sparse_init:10,irange:0.005,switch_uniform_init:false}]},MLP_SIGMOID:{batch_size:128,maxnum_iter:100,percent_batches_per_iter:100,dropout:true,layers:[{type:'sigmoid',dim:200,sparse_init:10,irange:0.005,switch_uniform_init:false},{type:'sigmoid',dim:200,sparse_init:10,irange:0.005,switch_uniform_init:false}]},MLP_MAXOUT:{batch_size:128,maxnum_iter:100,percent_batches_per_iter:100,layers:[{type:'maxout',num_units:240,num_pieces:2,irange:0.005,switch_uniform_init:true,max_col_norm:1.9365,sparse_init:10},{type:'maxout',num_units:240,num_pieces:2,irange:0.005,switch_uniform_init:true,max_col_norm:1.9365,sparse_init:10},{type:'maxout',num_units:240,num_pieces:2,irange:0.005,switch_uniform_init:true,max_col_norm:1.9365,sparse_init:10}]},MLP_MAXOUT_CONV:{batch_size:128,maxnum_iter:100,percent_batches_per_iter:100,layers:[{type:'maxout_convolution',num_units:48,num_pieces:2,irange:0.005,pad:0,kernel_shape:8,pool_shape:4,pool_stride:2,max_kernel_norm:0.9},{type:'maxout_convolution',num_units:48,num_pieces:2,irange:0.005,pad:3,kernel_shape:8,pool_shape:4,pool_stride:2,max_kernel_norm:1.9365},{type:'maxout_convolution',num_units:24,num_pieces:4,irange:0.005,pad:3,kernel_shape:5,pool_shape:2,pool_stride:2,max_kernel_norm:1.9365}]}};function getModel(name,params){var model;switch(name){case"AUTOENCODER":model=new AutoencoderModel();break;case"CONV":model=new ConvModel();break;case"MRNN":model=new MRNNModel();break;case"MLP_RECTIFIED":model=new MLPModels.Base({model_name:name});break;case"MLP_SIGMOID":model=new MLPModels.Base({model_name:name});break;case"MLP_MAXOUT":model=new MLPModels.Maxout({model_name:name});break;case"MLP_MAXOUT_CONV":model=new MLPModels.MaxoutConv({model_name:name});break;default:console.log('Error, invalid model name: '+name);}
if(params){model.populate(params);}else{model.populate(defaultModelParams[name]);}
return model;}
module.exports={getModel:getModel};},{"../Utils.js":7,"./Components.jsx":26,"./convModel.js":28,"./mlpModels.js":31}],28:[function(require,module,exports){"use strict";var ConvModelComponent=require('./cudaConvComponents2.jsx'),Utils=require('../Utils.js');_.extend(Backbone.Model.prototype,Backbone.Validation.mixin,Utils.ApplyTypesMixin);Backbone.Validation.configure({labelFormatter:'label'});var ConvSetLayer=Backbone.Model.extend({dumpParams:function(){var params=_.clone(this.attributes);return this.applyTypes(params);},isParamsValid:function(){var params=_.clone(this.attributes);this.validate();return this.isValid(_.keys(params));},labels:{convChannels:"number of channels",convFilters:"number of filters",convFilterSize:"filter size",convSharedBiases:"shared biases",convDropout:"dropout",poolStart:"start",poolSizeX:"sizeX",poolStride:"stride",poolOutputsX:"outputsX",normSize:"size",},validation:{'convChannels':{required:true,pattern:'digits',fn:'validateChannels'},'convFilters':{required:true,pattern:'digits',fn:'validateFilters'},'convFilterSize':{required:true,pattern:'digits',},'convSharedBiases':{required:true,pattern:'digits',},'convDropout':{required:true,pattern:'number',range:[0,1]},'poolStart':{required:true,pattern:'number',min:0},'poolSizeX':{required:true,pattern:'number',min:0},'poolStride':{required:true,pattern:'number',min:0},'poolOutputsX':{required:true,pattern:'number',min:0},'normSize':{required:true,pattern:'number',min:0}},validateChannels:function(value,attr,computedState){value=parseInt(value);if(value<4){if((value!==1)&&(value!==2)&&(value!==3)){return"ConvLayer channels value is invalid.";}}else{if(value%4){return"ConvLayer channels value is invalid. Channel value greater than 3 must be divisible by 4.";}}},validateFilters:function(value,attr,computedState){value=parseInt(value);if(!((value>=16)&&(value%16===0))){return"ConvLayer filters value is invalid. Must be divisible by 16.";}}});var FCLayer=Backbone.Model.extend({dumpParams:function(){var params=_.clone(this.attributes);return this.applyTypes(params);},isParamsValid:function(){var params=_.clone(this.attributes);this.validate();return this.isValid(_.keys(params));},labels:{'outputs':'outputs'},validation:{'outputs':{required:true,pattern:'number',min:0}}});var LayersList=Backbone.Collection.extend({isParamsValid:function(){if(this.length>0){return this.reduce(function(prev,cur){return prev&&cur.isParamsValid();},true);}},dumpParams:function(){var params;return this.map(function(layer,i){params=layer.dumpParams();params.layer_name='h'+i;return params;});},getDefaultConvSetLayer:function(){return{type:'convSet',convChannels:32,convFilters:32,convPadding:2,convStride:1,convFilterSize:5,convSharedBiases:1,convDropout:0.5,poolStart:0,poolSizeX:3,poolStride:2,poolOutputsX:0,normSize:10};},getDefaultFCLayer:function(){return{type:'fc',outputs:10};},model:function(attrs,options){switch(attrs.type){case"convSet":return new ConvSetLayer(attrs,options);case"fc":return new FCLayer(attrs,options);}},});var ConvModel=Backbone.Model.extend({initialize:function(){this.initLayers();},getBackboneModels:function(){return[this,this.layers];},initLayers:function(layers){this.layers=new LayersList(layers);},createModels:function(layers){return layers.map(function(layer){if(layer.type==='convSet'){return new ConvSetLayer(layer);}
return new FCLayer(layer);});},getComponent:function(){return ConvModelComponent({model:this});},dumpParams:function(){var params=_.clone(this.attributes);delete params.model_name;params.layers=this.layers.dumpParams();this.applyTypes(params);params.learning_rate={init:params.learning_rate_init};params.momentum={init:params.momentum_init};delete params.learning_rate_init;delete params.momentum_init;return params;},isParamsValid:function(){return this.isValid(true)&&this.layers.isParamsValid();},populate:function(params){params=_.clone(params);this.layers.reset(this.createModels(params.layers));this.layers.trigger('add');delete params.layers;this.set(params);},labels:{maxnum_iter:"number of iterations",img_size:"image size",learning_rate_init:"learning rate",momentum_init:"momentum",rand_sparse:'Random sparse'},validation:{'maxnum_iter':{required:true,pattern:'digits',range:[1,10000]},'img_size':{required:true,pattern:'digits',range:[8,128],fn:'divByEight'},'learning_rate_init':{required:false,pattern:'number',range:[1e-10,1]},'dropout':{required:false,pattern:'number',range:[0,1]},'momentum_init':{required:false,pattern:'number',range:[1e-10,1]}},divByEight:function(img_size,attr,state){if(img_size%8!==0){return"must be a multiple of 8";}}});module.exports=ConvModel;},{"../Utils.js":7,"./cudaConvComponents2.jsx":29}],29:[function(require,module,exports){"use strict";var ParamsComponents=require('./Components.jsx');var ParamInput=ParamsComponents.input;var ParamSlider=ParamsComponents.slider;var ParamSwitch=ParamsComponents.switch;var ParamCheckbox=ParamsComponents.checkbox;var Bootstrap=require('../bootstrap.jsx');var BootstrapButton=Bootstrap.Button;var Utils=require('../Utils.js');var ConvLayerComponent=React.createClass({displayName:'ConvLayerComponent',render:function(){var model=this.props.model;var errors=this.props.model.validate()||{};return(React.DOM.div(null,React.DOM.div(null,React.DOM.div({className:"layer-heading clearfix"},React.DOM.h4({className:"select-item"},"Convolutional Layer: ",React.DOM.em(null,this.props.key),BootstrapButton({className:"btn btn-mini btn-danger pull-right",href:"#",onClick:this.props.handleDelete},"Delete"))),React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"convChannels",label:this.props.model.labels.convChannels,model:model,errors:errors,placeholder:3}),ParamInput({key:"convFilters",label:this.props.model.labels.convFilters,model:model,errors:errors,placeholder:32}),ParamInput({key:"convFilterSize",label:this.props.model.labels.convFilterSize,model:model,errors:errors,placeholder:5}),ParamInput({key:"convSharedBiases",label:this.props.model.labels.convSharedBiases,model:model,errors:errors,placeholder:1}),ParamInput({key:"convDropout",label:this.props.model.labels.convDropout,model:model,errors:errors,placeholder:0.5})))),React.DOM.div(null,React.DOM.div({className:"layer-heading clearfix"},React.DOM.h4({className:"select-item"},"Pool Layer: ",React.DOM.em(null,this.props.key))),React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"poolStart",label:this.props.model.labels.poolStart,model:model,errors:errors,placeholder:0}),ParamInput({key:"poolSizeX",label:this.props.model.labels.poolSizeX,model:model,errors:errors,placeholder:3}),ParamInput({key:"poolStride",label:this.props.model.labels.poolStride,model:model,errors:errors,placeholder:2}),ParamInput({key:"poolOutputsX",label:this.props.model.labels.poolOutputsX,model:model,errors:errors,placeholder:0})))),React.DOM.div(null,React.DOM.div({className:"layer-heading clearfix"},React.DOM.h4({className:"select-item"},"Normalization Layer: ",React.DOM.em(null,this.props.key))),React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"normSize",label:this.props.model.labels.normSize,model:model,errors:errors,placeholder:3}))))));}});var FCLayerComponent=React.createClass({displayName:'FCLayerComponent',render:function(){var model=this.props.model;var errors=this.props.model.validate()||{};return(React.DOM.div(null,React.DOM.div({className:"layer-heading clearfix"},React.DOM.h4({className:"select-item"},"FC Layer: ",React.DOM.em(null,this.props.key),BootstrapButton({className:"btn btn-mini btn-danger pull-right",href:"#",onClick:this.props.handleDelete},"Delete"))),React.DOM.table({className:"table-params"},React.DOM.tbody(null))));}});var LayersComponent=React.createClass({displayName:'LayersComponent',clickDelete:function(model){this.props.layers.remove(model);},addConvSetLayer:function(e){e.preventDefault();var defaultConv=this.props.layers.getDefaultConvSetLayer();this.props.layers.add([defaultConv]);},addFCLayer:function(e){e.preventDefault();var defaultFC=this.props.layers.getDefaultFCLayer();this.props.layers.add([defaultFC]);},render:function(){var layersList=this.props.layers.map(function(layer,i){if(layer.get('type')==='convSet'){return ConvLayerComponent({model:layer,key:'layer'+i,handleDelete:this.clickDelete.bind(this,layer)});}
return FCLayerComponent({model:layer,key:'layer'+i,handleDelete:this.clickDelete.bind(this,layer)});},this);return(React.DOM.div({className:"layer-params"},BootstrapButton({className:"btn btn-mini btn-success pull-right",href:"#",onClick:this.addConvSetLayer},React.DOM.i({className:"icon icon-white icon-plus"}),"Add Conv Layer"),BootstrapButton({className:"btn btn-mini btn-sccess pull-right",href:"#",onClick:this.addFCLayer},React.DOM.i({className:"icon icon-white icon-plus"}),"Add FC Layer"),React.DOM.h2(null,"Layer params"),layersList));}});var CONVComponent=React.createClass({displayName:'CONVComponent',mixins:[Utils.BackboneMixin],getBackboneModels:function(){return[this.props.model];},render:function(){var model=this.props.model,errors=this.props.model.validate()||{};return(React.DOM.div(null,React.DOM.h4({className:"select-item text-center"},"Model params "),React.DOM.div(null,React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"maxnum_iter",label:"number of iterations",model:model,errors:errors}),ParamInput({key:"img_size",label:"image size",help:"must be a multiple of 8",model:model,errors:errors}),ParamInput({key:"dropout",label:"dropout",model:model,errors:errors,placeholder:0.5}),ParamInput({key:"learning_rate_init",label:"learning rate",model:model,errors:errors,placeholder:0.001}),ParamInput({key:"momentum_init",label:"momentum",model:model,errors:errors,placeholder:0.5}),ParamCheckbox({key:"random_sparse",label:"Use random sparse layers",model:model,errors:errors})))),LayersComponent({layers:this.props.model.layers})));}});module.exports=CONVComponent;},{"../Utils.js":7,"../bootstrap.jsx":9,"./Components.jsx":26}],30:[function(require,module,exports){"use strict";var ParamsComponents=require('./Components.jsx'),ParamInput=ParamsComponents.input,ParamSlider=ParamsComponents.slider,ParamSwitch=ParamsComponents.switch,ParamCheckbox=ParamsComponents.checkbox,Bootstrap=require('../bootstrap.jsx'),Utils=require('../Utils.js'),BootstrapButton=Bootstrap.Button;var MLPLayer=React.createClass({displayName:'MLPLayer',render:function(){var model=this.props.model,errors=this.props.model.validate()||{},init=null,switch_uniform=null;if(this.props.model.get('switch_uniform_init')){init=ParamInput({key:"irange",label:"Range of uniform initialization",model:model,errors:errors});}else{init=ParamSlider({key:"sparse_init",label:"Initial sparseness",help:"This defines the percentage of incoming weights per neuron that are non-zero at initialization. If you're not sure, leave it at 10%.",model:model,errors:errors});}
if(this.props.model.get('out_nonlin')!='LINEARGAUSSIAN')
switch_uniform=ParamSwitch({key:"switch_uniform_init",label:"Uniform initialization",model:model,errors:errors});return(React.DOM.div(null,React.DOM.div({className:"layer-heading clearfix"},BootstrapButton({className:"btn btn-mini btn-danger pull-right",href:"#",onClick:this.props.handleDeleteLayer},React.DOM.i({className:"icon icon-white icon-remove"}),"Delete Layer"),React.DOM.h4({className:"select-item"},"MLP Layer: ",React.DOM.em(null,this.props.key))),React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"dim",label:"Number of hidden units",model:model,errors:errors,placeholder:200}),switch_uniform,init))));}});var MaxoutLayer=React.createClass({displayName:'MaxoutLayer',render:function(){var model=this.props.model,errors=this.props.model.validate()||{},init=null;if(this.props.model.get('switch_uniform_init')){init=ParamInput({key:"irange",label:"Range of uniform initialization",model:model,errors:errors,placeholder:0.005});}else{init=ParamSlider({key:"sparse_init",label:"Initial sparseness",help:"This defines the percentage of incoming weights per neuron that are non-zero at initialization. If you're not sure, leave it at 10%.",model:model,errors:errors});}
return(React.DOM.div(null,React.DOM.div({className:"layer-heading clearfix"},BootstrapButton({className:"btn btn-mini btn-danger pull-right",href:"#",onClick:this.props.handleDeleteLayer},React.DOM.i({className:"icon icon-white icon-remove"}),"Delete Layer"),React.DOM.h4({className:"select-item"},"Maxout Layer: ",React.DOM.em(null,this.props.key))),React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"num_units",label:"Number of hidden units",model:model,errors:errors,placeholder:240}),ParamInput({key:"num_pieces",label:"Number of pieces",model:model,errors:errors,placeholder:2}),ParamInput({key:"max_col_norm",label:"Max column norm",model:model,errors:errors,placeholder:1.9365}),ParamSwitch({key:"switch_uniform_init",label:"Uniform initialization",model:model,errors:errors}),init))));}});var MaxoutConvLayer=React.createClass({displayName:'MaxoutConvLayer',render:function(){var model=this.props.model,errors=this.props.model.validate()||{};return(React.DOM.div(null,React.DOM.div({className:"layer-heading clearfix"},BootstrapButton({className:"btn btn-mini btn-danger pull-right",href:"#",onClick:this.props.handleDeleteLayer},React.DOM.i({className:"icon icon-white icon-remove"}),"Delete Layer"),React.DOM.h4({className:"select-item"},"Maxout Layer: ",React.DOM.em(null,this.props.key))),React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"num_units",label:"Number of hidden units",model:model,errors:errors,placeholder:48}),ParamInput({key:"num_pieces",label:"Number of pieces",model:model,errors:errors,placeholder:2}),ParamInput({key:"kernel_shape",label:"Kernel shape",model:model,errors:errors,placeholder:8}),ParamInput({key:"pool_shape",label:"Pool shape",model:model,errors:errors,placeholder:4}),ParamInput({key:"pad",label:"Padding",model:model,errors:errors,placeholder:0}),ParamInput({key:"pool_stride",label:"Pool stride",model:model,errors:errors,placeholder:2}),ParamInput({key:"max_kernel_norm",label:"Max kernel norm",model:model,errors:errors,placeholder:0.9}),ParamInput({key:"irange",label:"Range of uniform initialization",model:model,errors:errors,placeholder:0.005})))));}});var LayersList=React.createClass({displayName:'LayersList',addLayer:function(e){e.preventDefault();this.props.layers.add([this.props.model.getDefaultLayer()]);},deleteLayer:function(i,e){e.preventDefault();this.props.layers.remove(this.props.layers.at(i));},render:function(){var modelName=this.props.model.get('model_name'),layers=this.props.layers.map(function(layer,i){if(modelName==='MLP_MAXOUT_CONV'){return MaxoutConvLayer({model:layer,key:'h'+i,handleDeleteLayer:this.deleteLayer.bind(this,i)});}else if(modelName==='MLP_MAXOUT'){return MaxoutLayer({model:layer,key:'h'+i,handleDeleteLayer:this.deleteLayer.bind(this,i)});}else{return MLPLayer({model:layer,key:'h'+i,handleDeleteLayer:this.deleteLayer.bind(this,i)});}},this);if(layers.length===0){layers=React.DOM.div({className:"settings-error"},React.DOM.p(null,"Add at least one layer"));}
return(React.DOM.div({className:"layer-params"},BootstrapButton({className:"btn btn-mini btn-success pull-right",href:"#",onClick:this.addLayer},React.DOM.i({className:"icon icon-white icon-plus"}),"Add Layer"),React.DOM.h2(null,"Layer params"),layers));}});var LearningRateComponent=React.createClass({displayName:'LearningRateComponent',render:function(){var model=this.props.model,errors=this.props.model.validate()||{},component=null;if(!model.get('constant')){component=[ParamInput({key:"final",label:"final learning rate",model:model,errors:errors,placeholder:0.01}),ParamInput({key:"decay_factor",label:"divide learning rate by this after each GD step",model:model,errors:errors,placeholder:1.00004})];}
return(React.DOM.div(null,React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"init",label:"initial learning rate",model:model,errors:errors,placeholder:0.1}),ParamCheckbox({key:"constant",label:"use constant learning rate",model:model,errors:errors}),component))));}});var MomentumComponent=React.createClass({displayName:'MomentumComponent',render:function(){var model=this.props.model,errors=this.props.model.validate()||{},component=null;if(!model.get('constant')){component=[ParamInput({key:"final",label:"final momentum",model:model,errors:errors,placeholder:0.95}),ParamInput({key:"start",label:"start increase momentum on this iteration",model:model,errors:errors,placeholder:1}),ParamInput({key:"stop",label:"on this iteration momentum will take it's final value",model:model,errors:errors,placeholder:20})];}
return(React.DOM.div(null,React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"init",label:"initial momentum",model:model,errors:errors,placeholder:0.5}),ParamCheckbox({key:"constant",label:"use constant momentum",model:model,errors:errors}),component))));}});var MLPComponent=React.createClass({displayName:'MLPComponent',mixins:[Utils.BackboneMixin],getBackboneModels:function(){return[this.props.model];},render:function(){var model=this.props.model,errors=this.props.model.validate()||{},dropout=null;if(this.props.withDropout){dropout=ParamCheckbox({key:"dropout",label:"use dropout?",model:model,errors:errors});}
return(React.DOM.div(null,React.DOM.h4({className:"select-item text-center"},"Model params"),React.DOM.div(null,React.DOM.table({className:"table-params"},React.DOM.tbody(null,ParamInput({key:"maxnum_iter",label:"number of iterations",model:model,errors:errors}),ParamInput({key:"batch_size",label:"size of batches",model:model,errors:errors}),ParamSlider({key:"percent_batches_per_iter",label:'number of batches to proccess per iteration',model:model}),dropout))),LearningRateComponent({model:this.props.model.learningRateModel}),MomentumComponent({model:this.props.model.momentumModel}),LayersList({layers:this.props.model.layers,model:this.props.model})));}});module.exports={mlp:MLPComponent};},{"../Utils.js":7,"../bootstrap.jsx":9,"./Components.jsx":26}],31:[function(require,module,exports){"use strict";var mlpComponents=require('./mlpComponents.jsx'),MLPModelComponent=mlpComponents.mlp,Utils=require('../Utils.js');_.extend(Backbone.Model.prototype,Backbone.Validation.mixin,Utils.ApplyTypesMixin);Backbone.Validation.configure({labelFormatter:'label'});var BaseLayer=Backbone.Model.extend({initialize:function(){if(this.get('switch_uniform_init')===undefined){if(this.get('irange')===undefined){this.set('switch_uniform_init',false);}else{this.set('switch_uniform_init',true);}}},dumpParams:function(){var params=_.clone(this.attributes);params=this.selectWeightInit(params);return this.applyTypes(params);},isParamsValid:function(){var params=_.clone(this.labels);this.validate();params=this.selectWeightInit(params);return this.isValid(_.keys(params));},selectWeightInit:function(params){if(this.get('switch_uniform_init')){delete params.sparse_init;}else{delete params.irange;}
delete params.switch_uniform_init;return params;},labels:{'irange':"Range of uniform initialization",'switch_uniform_init':"",'sparse_init':"Initial sparseness",'dim':"Number of hidden units"},validation:{'dim':{required:true,pattern:'digits',range:[1,1000]},'sparse_init':{required:true,pattern:'digits',range:[0,100]},'irange':{required:true,pattern:'number',range:[1e-10,1]}}});var BaseLayersList=Backbone.Collection.extend({model:BaseLayer,isParamsValid:function(){if(this.length>0){return this.reduce(function(prev,cur){return prev&&cur.isParamsValid();},true);}},dumpParams:function(){var params;return this.map(function(layer,i){params=layer.dumpParams();params.layer_name='h'+i;return params;});}});var MaxoutLayer=BaseLayer.extend({labels:{'num_units':'Number of hidden units','num_pieces':'Number of pieces','irange':"Range of uniform initialization",'switch_uniform_init':"",'sparse_init':"Initial sparseness",'max_col_norm':'Max column norm'},validation:{'num_units':{required:true,pattern:'digits',range:[1,1000]},'num_pieces':{required:true,pattern:'digits',range:[1,1000]},'irange':{required:true,pattern:'number',range:[1e-10,1]},'sparse_init':{required:true,pattern:'digits',range:[0,100]},'max_col_norm':{required:true,pattern:'number',min:0.1}}});var MaxoutLayersList=BaseLayersList.extend({model:MaxoutLayer});var MaxoutConvLayer=BaseLayer.extend({initialize:function(){},labels:{'num_units':'Number of hidden units','num_pieces':'Number of pieces','irange':'Range of uniform initialization','kernel_shape':'Kernel shape','pool_shape':'Pool shape','pad':'Padding','pool_stride':'Pool stride','max_kernel_norm':'Max kernel norm'},selectWeightInit:function(params){return params;},validation:{'num_units':{required:true,pattern:'digits',range:[1,1000]},'num_pieces':{required:true,pattern:'digits',range:[1,1000]},'irange':{required:true,pattern:'number',range:[1e-10,1]},'kernel_shape':{required:true,pattern:'digits',range:[1,1000]},'pool_shape':{required:true,pattern:'digits',range:[1,1000]},'pad':{required:true,pattern:'digits',range:[0,1000]},'pool_stride':{required:true,pattern:'digits',range:[0,1000]},'max_kernel_norm':{required:true,pattern:'number',min:0.1}}});var MaxoutConvLayersList=BaseLayersList.extend({model:MaxoutConvLayer});var LearningRateModel=Backbone.Model.extend({dumpParams:function(){var params=_.clone(this.attributes);if(params.constant){params={init:params.init,constant:true};}
return this.applyTypes(params);},isParamsValid:function(){this.validate();if(this.get('constant')){return this.isValid('init');}else{return this.isValid();}},labels:{'constant':'','init':'initial learning rate','final':'final learning rate','decay_factor':'Decay factor'},validation:{'init':{required:false,pattern:'number',range:[1e-10,100]},'final':{required:false,pattern:'number',range:[1e-10,100],fn:'gtInit'},'decay_factor':{required:false,pattern:'number',range:[1,100]}},gtInit:function(fin,attr,state){if(state.init!==undefined&&fin!==undefined&&parseFloat(state.init)<=parseFloat(fin)){return"should be lower then initial";}}});var MomentumModel=Backbone.Model.extend({dumpParams:function(){var params=_.clone(this.attributes);if(params.constant){params={init:params.init,constant:true};}
return this.applyTypes(params);},isParamsValid:function(){this.validate();if(this.get('constant')){return this.isValid('init');}else{return this.isValid();}},labels:{'constant':'','init':'initial momentum','final':'final momentum','start':'start','stop':"stop"},validation:{'init':{required:false,pattern:'number',range:[1e-10,10]},'final':{required:false,pattern:'number',range:[1e-10,10],fn:'gtInit'},'start':{required:false,pattern:'digits',range:[1,10000]},'stop':{required:false,pattern:'digits',range:[1,10000],fn:'gtStart'},},gtInit:function(fin,attr,state){if(state.init!==undefined&&fin!==undefined&&parseFloat(state.init)>=parseFloat(fin)){return"should be greate then initial";}},gtStart:function(stop,attr,state){if(state.start!==undefined&&stop!==undefined&&parseInt(state.start,10)>=parseInt(stop,10)){return"should be greate then start";}}});var BaseModel=Backbone.Model.extend({initialize:function(){this.learningRateModel=new LearningRateModel();this.momentumModel=new MomentumModel();switch(this.get('model_name')){case"MLP_RECTIFIED":this.set('layer_type','rectified_linear');break;case"MLP_SIGMOID":this.set('layer_type','sigmoid');break;case"MLP_MAXOUT":this.set('layer_type','maxout');break;case"MLP_MAXOUT_CONV":this.set('layer_type','maxout_convolution');break;}
this.initLayers();},populate:function(params){params=_.clone(params);this.learningRateModel.set(params.learning_rate);delete params.learning_rate;this.momentumModel.set(params.momentum);delete params.momentum;this.layers.reset(params.layers);this.layers.trigger('add');delete params.layers;this.set(params);},getComponent:function(){return MLPModelComponent({model:this,withDropout:true});},getBackboneModels:function(){return[this,this.learningRateModel,this.momentumModel,this.layers];},initLayers:function(layers){this.layers=new BaseLayersList(layers);},getDefaultLayer:function(){if(this.attributes.out_nonlin==='LINEARGAUSSIAN'){return{type:this.get('layer_type'),dim:200,irange:0.005,switch_uniform_init:true,out_nonlin:'LINEARGAUSSIAN'};}else{return{type:this.get('layer_type'),dim:200,sparse_init:10,irange:0.005,switch_uniform_init:false};}},dumpParams:function(){var params=_.clone(this.attributes);delete params.model_name;delete params.layer_type;params.learning_rate=this.learningRateModel.dumpParams();params.momentum=this.momentumModel.dumpParams();params.layers=this.layers.dumpParams();return this.applyTypes(params);},isParamsValid:function(){return this.isValid(true)&&this.learningRateModel.isParamsValid()&&this.momentumModel.isParamsValid()&&this.layers.isParamsValid();},labels:{batch_size:'size of batches',maxnum_iter:'number of iterations',percent_batches_per_iter:'number of batches to proccess per iteration'},validation:{'batch_size':{required:true,pattern:'digits',range:[10,10000]},'maxnum_iter':{required:true,pattern:'digits',range:[1,10000]},'percent_batches_per_iter':{required:true,pattern:'digits',range:[0,100]}}});var MaxoutModel=BaseModel.extend({initLayers:function(layers){this.layers=new MaxoutLayersList(layers);},getComponent:function(){return MLPModelComponent({model:this,withDropout:false});},getDefaultLayer:function(){return{type:this.get('layer_type'),num_units:240,num_pieces:2,irange:0.005,switch_uniform_init:true,max_col_norm:1.9365,sparse_init:10};}});var MaxoutConvModel=BaseModel.extend({initLayers:function(layers){this.layers=new MaxoutConvLayersList(layers);},getComponent:function(){return MLPModelComponent({model:this,withDropout:false});},selectWeightInit:function(params){return params;},getDefaultLayer:function(){return{type:this.get('layer_type'),num_units:48,num_pieces:2,irange:0.005,pad:0,kernel_shape:8,pool_shape:4,pool_stride:2,max_kernel_norm:1.9365,};}});module.exports={Base:BaseModel,MaxoutConv:MaxoutConvModel,Maxout:MaxoutModel};},{"../Utils.js":7,"./mlpComponents.jsx":30}]},{},[2])